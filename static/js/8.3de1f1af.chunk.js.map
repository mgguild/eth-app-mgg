{"version":3,"sources":["components/Balance.tsx","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_createBaseEach.js","hooks/usePersistState.ts","utils/getTimePeriods.ts","components/TokenPairImage/index.tsx","hooks/useStake.ts","hooks/useUnstake.ts","hooks/useHarvest.ts","../node_modules/lodash/orderBy.js","../node_modules/lodash/_baseOrderBy.js","../node_modules/lodash/_baseMap.js","../node_modules/lodash/_baseSortBy.js","../node_modules/lodash/_compareMultiple.js","../node_modules/lodash/_compareAscending.js","hooks/price.ts","views/Farms/components/FarmTable/Actions/styles.ts","components/ApyCalculatorModal/index.tsx","components/Tags.tsx","hooks/refHelpers.ts","components/layout/Flex.tsx","utils/latinise.ts","views/Farms/components/Divider.tsx","views/Farms/components/FarmCard/DetailsSection.tsx","hooks/useDelayedUnmount.ts","../node_modules/lodash/_createAggregator.js","../node_modules/lodash/_arrayAggregator.js","../node_modules/lodash/_baseAggregator.js","components/PageHeader/PageHeader.tsx","components/ModalInput/ModalInput.tsx","../node_modules/lodash/partition.js","utils/index.ts","views/Pools/components/PoolCard/StyledCard.tsx","views/Pools/components/CakeVaultCard/CakeVaultTokenPairImage.tsx","views/Pools/components/PoolCard/StyledCardHeader.tsx","views/Pools/components/PoolCard/Modals/NotEnoughTokensModal.tsx","../node_modules/react-feather/dist/icons/chevron-down.js","../node_modules/react-feather/dist/icons/chevron-up.js","views/Pools/components/ToggleView/ToggleView.tsx","views/Pools/components/PoolCard/Modals/Stake.tsx","views/Pools/components/PoolCard/Modals/StakeModal.tsx","views/Pools/components/PoolCard/CardActions/StakeActions.tsx","views/Pools/components/PoolCard/CardActions/index.tsx","views/Pools/components/ClaimAction/index.tsx","views/Pools/components/PoolCard/index.tsx","state/block/hooks.ts","views/Pools/components/PoolCard/AprRow.tsx","views/Pools/components/PoolCard/CardFooter/ExpandedFooter.tsx","views/Pools/components/PoolCard/CardFooter/index.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/VaultApprovalAction.tsx","hooks/cakeVault/useWithdrawalFeeTimer.ts","views/Pools/components/CakeVaultCard/WithdrawalFeeTimer.tsx","views/Pools/components/CakeVaultCard/UnstakingFeeCountdownRow.tsx","views/Pools/components/CakeVaultCard/FeeSummary.tsx","views/Pools/components/CakeVaultCard/VaultStakeModal.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/HasSharesActions.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/VaultStakeActions.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/index.tsx","views/Pools/components/CakeVaultCard/RecentCakeProfitBalance.tsx","views/Pools/components/CakeVaultCard/RecentCakeProfitRow.tsx","views/Pools/components/CakeVaultCard/index.tsx","views/Pools/components/PoolsTable/Cells/BaseCell.tsx","views/Pools/components/PoolsTable/ActionPanel/ActionPanel.tsx","views/Pools/components/PoolsTable/Cells/NameCell.tsx","views/Pools/components/PoolsTable/Cells/EarningsCell.tsx","views/Pools/components/PoolsTable/Cells/AprCell.tsx","views/Pools/components/PoolsTable/Cells/TotalStakedCell.tsx","views/Pools/components/PoolsTable/Cells/EndsInCell.tsx","views/Pools/components/PoolsTable/Cells/ExpandActionCell.tsx","views/Pools/components/PoolsTable/ActionPanel/styles.ts","views/Pools/components/PoolsTable/ActionPanel/Stake.tsx","views/Pools/components/PoolsTable/PoolRow.tsx","views/Pools/components/PoolsTable/PoolsTable.tsx","views/Pools/index.tsx"],"names":["Balance","value","color","decimals","isDisabled","unit","prefix","onClick","props","previousValue","useRef","useEffect","current","start","end","duration","separator","baseForOwn","require","baseEach","createBaseEach","module","exports","baseFor","keys","object","iteratee","isArrayLike","eachFunc","fromRight","collection","length","index","iterable","Object","defaultOptions","hydrate","identity","dehydrate","usePersistState","initialValue","userOptions","localStorageKey","useState","valueFromLS","localStorage","getItem","JSON","parse","error","setValue","setItem","stringify","HOUR_IN_SECONDS","DAY_IN_SECONDS","MONTH_IN_SECONDS","YEAR_IN_SECONDS","getTimePeriods","seconds","delta","Math","abs","timeLeft","years","months","days","hours","minutes","floor","StyledLogo","styled","img","PairLogoImg","Flex","getImageUrlFromToken","token","address","getAddress","symbol","tokens","wbnb","iconExtension","TokenPairImage","primaryToken","secondaryToken","src","alt","useSousStake","sousId","isUsingBnb","dispatch","useAppDispatch","useWeb3React","account","masterChefContract","useMasterchef","sousChefContract","useSousChef","handleStake","useCallback","amount","a","stake","sousStakeBnb","sousStake","updateUserStakedBalance","updateUserBalance","onStake","useStake","pid","contract","txHash","console","info","useExit","stakingContract","useLPStakingContract","onUnstake","exit","useSousUnstake","enableEmergencyWithdraw","handleUnstake","unstake","sousEmergencyUnstake","sousUnstake","updateUserPendingReward","useUnstake","useClaim","onReward","claim","useSousHarvest","handleHarvest","harvest","soushHarvestBnb","soushHarvest","baseOrderBy","isArray","iteratees","orders","guard","undefined","arrayMap","baseGet","baseIteratee","baseMap","baseSortBy","baseUnary","compareMultiple","result","key","other","Array","array","comparer","sort","compareAscending","objCriteria","criteria","othCriteria","ordersLength","isSymbol","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","networkFinder","networkId","usePoolPrice","stakingTokenAddress","rewardTokenAddress","isFetchData","chainName","MoralisWeb3Api","useMoralisWeb3Api","chainId","_stakingTokenAddress","_rewardTokenAddress","stakingPrice","setStakingPrice","rewardPrice","setRewardPrice","web3","useWeb3","utils","toChecksumAddress","getTokenPrice","chain","_stakingTokenPrice","usdPrice","_rewardTokenPrice","fetchData","useFarmPrice","lpTotalSupply","token1Address","token2Address","lpAddress","_token1Address","_token2Address","_lpAddress","LPPrice","setLPPrice","findPrice","tokenAddress","price","_token1Price","_token2Price","res","getTokenBalances","token_addresses","Promise","all","data","token_address","toLowerCase","_totalToken1InPool","getBalanceNumber","BigNumber","balance","Number","_totalToken2InPool","ActionContainer","div","theme","colors","MGG_active","mediaQueries","sm","xl","ActionTitles","ActionContent","Earned","text","Grid","GridItem","GridHeaderItem","ApyCalculatorModal","onDismiss","tokenPrice","apr","linkLabel","linkHref","earningTokenSymbol","roundingDecimals","compoundFrequency","performanceFee","t","useTranslation","oneThousandDollarsWorthOfToken","tokenEarnedPerThousand1D","tokenEarnedPerThousandDollarsCompounding","numberOfDays","farmApr","tokenEarnedPerThousand7D","tokenEarnedPerThousand30D","tokenEarnedPerThousand365D","title","fontSize","bold","textTransform","mb","mr","ml","num","getRoi","amountEarned","amountInvested","toFixed","style","maxWidth","justifyContent","textAlign","freq","toLocaleString","mt","fee","href","CoreTag","variant","outline","startIcon","width","CommunityTag","DualTag","ManualPoolTag","CompoundingPoolTag","usePrevious","ref","React","FlexLayout","Latinise","latin_map","τ","Τ","latinise","input","replace","x","StyledHr","textSubtle","primary","ModalHr","hr","Wrapper","StyledLinkExternal","LinkExternal","DetailsSection","stakingAddress","lpInfoAddress","useDelayedUnmount","isMounted","delayTime","shouldRender","setShouldRender","timeoutId","setTimeout","clearTimeout","arrayAggregator","baseAggregator","setter","initializer","func","accumulator","Outer","Box","background","isDark","modal","Inner","Container","PageHeader","children","StyledTokenInput","isWarning","shadows","warning","inset","StyledInput","Input","xs","ModalInput","max","onChange","onSelectMax","isBalanceZero","position","margin","alignItems","pattern","inputMode","step","min","placeholder","size","partition","createAggregator","push","getBscScanLink","type","ChainId","MAINNET","BASE_BSC_SCAN_URLS","getEthScanLink","BASE_ETH_SCAN_URLS","StyledCard","keyframes","MGG_container","isFinished","StyledCardInner","card","isPromotedPool","radii","CakeVaultTokenPairImage","primaryTokenSrc","cake","primarySrc","secondarySrc","StyledCardHeader","earningToken","stakingToken","isAutoVault","isStaking","useContext","ThemeContext","flexDirection","height","StyledLink","Link","NotEnoughTokensModal","tokenSymbol","useTheme","as","external","BASE_EXCHANGE_URL","_extends","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","ChevronDown","forwardRef","_ref","_ref$color","_ref$size","rest","createElement","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","propTypes","PropTypes","string","oneOfType","number","displayName","ChevronUp","ViewMode","ModalBody","StakeActionModal","isBnbPool","pool","stakingTokenBalance","stakingTokenPrice","isRemovingStake","isApprove","userData","stakingLimit","stakingTokenContract","useERC20","useToast","toastSuccess","toastError","pendingTx","setPendingTx","isApproved","setIsApproved","stakeAmount","setStakeAmount","hasReachedStakeLimit","setHasReachedStakedLimit","setPercent","userLimit","minus","stakedBalance","totalStakingTokens","BIG_ZERO","remainingStakeTokens","totalAllowance","useTokenAllowance","contractAddress","useSousApproveWithAmount","getDecimalAmount","handleApprove","requestedApproval","getCalculatedStakingLimit","gt","formatNumber","times","toNumber","fullDecimalStakeAmount","plus","gte","handleConfirmClick","maxstake","getFullDisplayBalance","tokensymbol","sliderPercent","percentageOfStakingMax","dividedBy","multipliedBy","amountToStake","handleChangePercent","e","convertedInput","percentage","handleStakeInputChange","currentTarget","addLiquidityUrl","marginTop","marginBottom","isLoading","endIcon","spin","disabled","fullWidth","marginRight","marginLeft","StyledFlex","StakeModal","addTokenUrl","isAddTokenDisabled","activeSelect","setActiveSelect","earnedTokenBalance","useTokenBalance","totalStakedTokens","totalEarningTokens","totalEarnedTokens","pendingReward","temp","tokenPerBlock","totalStaked","rewardRate","useModal","Stake","onPresentStakeAction","handleHarvestConfirm","className","window","open","BASE_SWAP_URL","isDepositDisabled","border","borderTop","onMouseEnter","onMouseLeave","eq","isWithdrawDisabled","StakeAction","isStaked","onPresentStake","useTooltip","placement","targetRef","tooltip","tooltipVisible","isEqualTo","isGreaterThan","Text","CardActions","poolCategory","isComingSoon","earningTokenPrice","PoolCategory","BINANCE","allowance","totalEarned","display","StakeActions","ClaimAction","MGG_accent2","pr","borderRadius","PoolCard","startBlock","endBlock","accountHasStakedBalance","toString","currentBlock","useSelector","state","block","getPoolBlockInfo","blocksRemaining","shouldShowBlockCountdown","blocksUntilStart","hasPoolStarted","blocksToDisplay","rate","UnlockButton","getBscScanAddressUrl","getEthScanAddressUrl","AprRow","tooltipContent","getAprData","earningsPercentageToDisplay","apyModalLink","process","onPresentApyModal","scale","ExpandedWrapper","ExpandedFooter","useBlock","useCakeVault","totalCakeInVault","fees","poolContractAddress","cakeVaultContractAddress","getCakeVaultAddress","imageSrc","BASE_URL","isMetaMaskInScope","ethereum","isMetaMask","isManualCakePool","totalStakedTargetRef","totalStakedTooltip","totalStakedTooltipVisible","small","manualCakeTotalMinusAutoVault","getTotalStakedBalance","getBscScanBlockCountdownUrl","projectLink","BASE_BSC_SCAN_URL","p","registerToken","memo","ExpandableButtonWrapper","Footer","isExpanded","setIsExpanded","manualTooltipText","autoTooltipText","expanded","VaultApprovalAction","setLastUpdated","useVaultApprove","useWithdrawalFeeTimer","lastDepositedTime","userShares","withdrawalFeePeriod","secondsRemaining","setSecondsRemaining","hasUnstakingFee","setHasUnstakingFee","Date","now","currentSeconds","setCurrentSeconds","secondsRemainingCalc","doesUnstakingFeeApply","timerInterval","setInterval","prevSeconds","clearInterval","WithdrawalFeeTimer","day","hour","minute","UnstakingFeeCountdownRow","isTableVariant","withdrawalFee","feeAsDecimal","parseInt","noFeeToPay","shouldShowTimer","FeeSummary","stakingTokenSymbol","feeInCake","parseFloat","StyledButton","Button","VaultStakeModal","stakingMax","cakeVaultContract","useCakeVaultContract","pricePerFullShare","percent","cakePriceBusd","usePriceCakeBusd","usdValueStaked","handleWithdrawal","convertedStakeAmount","shareStakeToWithdraw","convertCakeToShares","triggerWithdrawAllThreshold","sharesRemaining","sharesAsBigNumber","lte","methods","withdrawAll","send","from","on","fetchCakeVaultUserData","message","withdraw","handleDeposit","deposit","minWidth","onUserInput","BIG_TEN","pow","currencyValue","onValueChanged","name","valueLabel","mx","HasSharesActions","convertSharesToCake","cakeAsBigNumber","cakeAsNumberBalance","stakedDollarValue","onPresentTokenRequired","onPresentUnstake","VaultStakeActions","accountHasSharesStaked","InlineText","CakeVaultCardActions","useCheckVaultApprovalStatus","isVaultApproved","RecentCakeProfitBalance","cakeToDisplay","dollarValueToDisplay","dateStringToDisplay","RecentCakeProfitCountdownRow","cakeAtLastUserAction","lastUserActionTime","getCakeVaultEarnings","hasAutoEarnings","autoCakeToDisplay","autoUsdToDisplay","lastActionInMs","StyledCardBody","CardBody","CakeVaultCard","showStakedOnly","useMatchBreakpoints","isXl","isVaultUserDataLoading","performanceFeeAsDecimal","RecentCakeProfitRow","VaultCardActions","CardFooter","BaseCell","expandAnimation","md","ChevronDownIcon","toggled","collapseAnimation","css","lg","textDisabled","CardLayout","InfoBox","Pools","location","useLocation","usePools","poolsWithoutAutoVault","pools","userDataLoaded","stakedOnly","numberOfPoolsVisible","setNumberOfPoolsVisible","observerIsSet","setObserverIsSet","loadMoreRef","TABLE","searchQuery","sortOption","isMobile","useMedia","accountHasVaultShares","useMemo","cakePool","map","finishedPools","openPools","stakedOnlyFinishedPools","filter","stakedOnlyOpenPools","usePollFarmsData","useFetchCakeVault","useFetchPublicPoolsData","IntersectionObserver","entries","isIntersecting","poolsCurrentlyVisible","rootMargin","threshold","observe","showFinishedPools","pathname","includes","showUpcomingPools","poolsToShow","chosenPools","lowercaseQuery","poolsToSort","orderBy","sortPools","slice","cardLayout","setFetchData","useRouteMatch","mggPool","path","url","isExact","mainPool","rewardPerBlock","prevStakingPrice","prevRewardPrice","poolApr","getPoolApr","tvr","minHeight","padding","flex","borderBottom","Page"],"mappings":"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","file":"static/js/8.3de1f1af.chunk.js","sourcesContent":["import React, { useEffect, useRef } from 'react'\r\nimport CountUp from 'react-countup'\r\nimport { Text, TextProps } from '@pancakeswap/uikit'\r\n\r\ninterface BalanceProps extends TextProps {\r\n  value: number\r\n  decimals?: number\r\n  unit?: string\r\n  isDisabled?: boolean\r\n  prefix?: string\r\n  onClick?: (event: React.MouseEvent<HTMLElement>) => void\r\n}\r\n\r\nconst Balance: React.FC<BalanceProps> = ({\r\n  value,\r\n  color = 'text',\r\n  decimals = 3,\r\n  isDisabled = false,\r\n  unit,\r\n  prefix,\r\n  onClick,\r\n  ...props\r\n}) => {\r\n  const previousValue = useRef(0)\r\n\r\n  useEffect(() => {\r\n    previousValue.current = value\r\n  }, [value])\r\n  return (\r\n    <Text color={isDisabled ? 'textDisabled' : color} onClick={onClick} {...props}>\r\n      {prefix && <span>{prefix}</span>}\r\n      <CountUp start={previousValue.current} end={value} decimals={decimals} duration={1} separator=\",\" />\r\n      {unit && <span>{unit}</span>}\r\n    </Text>\r\n  )\r\n}\r\n\r\nexport default Balance\r\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","import identity from 'lodash/identity'\r\nimport { useEffect, useState } from 'react'\r\n\r\ninterface UsePersistStateOptions {\r\n  localStorageKey: string\r\n  hydrate?: (value: any) => any\r\n  dehydrate?: (value: any) => any\r\n}\r\n\r\nconst defaultOptions = {\r\n  hydrate: identity,\r\n  dehydrate: identity,\r\n}\r\n\r\n/**\r\n * Same as \"useState\" but saves the value to local storage each time it changes\r\n */\r\nconst usePersistState = (initialValue: any, userOptions: UsePersistStateOptions) => {\r\n  const { localStorageKey, hydrate, dehydrate } = { ...defaultOptions, ...userOptions }\r\n  const [value, setValue] = useState(() => {\r\n    try {\r\n      const valueFromLS = localStorage.getItem(localStorageKey)\r\n\r\n      return valueFromLS ? hydrate(JSON.parse(valueFromLS)) : initialValue\r\n    } catch (error) {\r\n      return initialValue\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(localStorageKey, JSON.stringify(dehydrate(value)))\r\n  }, [value, localStorageKey, dehydrate])\r\n\r\n  return [value, setValue]\r\n}\r\n\r\nexport default usePersistState\r\n","const MINUTE_IN_SECONDS = 60\r\nconst HOUR_IN_SECONDS = 3600\r\nconst DAY_IN_SECONDS = 86400\r\nconst MONTH_IN_SECONDS = 2629800\r\nconst YEAR_IN_SECONDS = 31557600\r\n\r\n/**\r\n * Format number of seconds into year, month, day, hour, minute, seconds\r\n *\r\n * @param seconds\r\n */\r\nconst getTimePeriods = (seconds: number) => {\r\n  let delta = Math.abs(seconds)\r\n  const timeLeft = {\r\n    years: 0,\r\n    months: 0,\r\n    days: 0,\r\n    hours: 0,\r\n    minutes: 0,\r\n    seconds: 0,\r\n  }\r\n\r\n  if (delta >= YEAR_IN_SECONDS) {\r\n    timeLeft.years = Math.floor(delta / YEAR_IN_SECONDS)\r\n    delta -= timeLeft.years * YEAR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MONTH_IN_SECONDS) {\r\n    timeLeft.months = Math.floor(delta / MONTH_IN_SECONDS)\r\n    delta -= timeLeft.months * MONTH_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= DAY_IN_SECONDS) {\r\n    timeLeft.days = Math.floor(delta / DAY_IN_SECONDS)\r\n    delta -= timeLeft.days * DAY_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= HOUR_IN_SECONDS) {\r\n    timeLeft.hours = Math.floor(delta / HOUR_IN_SECONDS)\r\n    delta -= timeLeft.hours * HOUR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MINUTE_IN_SECONDS) {\r\n    timeLeft.minutes = Math.floor(delta / MINUTE_IN_SECONDS)\r\n    delta -= timeLeft.minutes * MINUTE_IN_SECONDS\r\n  }\r\n\r\n  timeLeft.seconds = delta\r\n\r\n  return timeLeft\r\n}\r\n\r\nexport default getTimePeriods\r\n","import React from 'react'\r\nimport { TokenPairImageProps as UIKitTokenPairImageProps } from '@pancakeswap/uikit'\r\nimport { Flex } from '@sparkpointio/sparkswap-uikit'\r\nimport styled from 'styled-components'\r\nimport tokens from 'config/constants/tokens'\r\nimport { Token } from 'config/constants/types'\r\nimport { getAddress } from 'utils/addressHelpers'\r\n\r\ninterface TokenPairImageProps extends Omit<UIKitTokenPairImageProps, 'primarySrc' | 'secondarySrc'> {\r\n  primaryToken: Token\r\n  secondaryToken: Token\r\n}\r\n\r\nconst StyledLogo = styled.img`\r\n  width: 50px;\r\n`\r\nconst PairLogoImg = styled(Flex)`\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n  & > * {\r\n    margin-left: 10px;\r\n  }\r\n`\r\n\r\nconst getImageUrlFromToken = (token: Token) => {\r\n  const address = getAddress(token.symbol === 'BNB' ? tokens.wbnb.address : token.address)\r\n  return `/images/tokens/${address}.${token.iconExtension?? 'svg'}`\r\n}\r\n\r\nconst TokenPairImage: React.FC<TokenPairImageProps> = ({ primaryToken, secondaryToken }) => {\r\n  return (\r\n    <PairLogoImg>\r\n      <StyledLogo src={getImageUrlFromToken(primaryToken)} alt='logo-img' />\r\n      <StyledLogo src={getImageUrlFromToken(secondaryToken)} alt='logo-img' />\r\n    </PairLogoImg>\r\n  )\r\n}\r\n\r\nexport default TokenPairImage\r\n","import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Contract } from 'web3-eth-contract'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserStakedBalance, updateUserBalance } from 'state/actions'\r\nimport { stake, sousStake, sousStakeBnb } from 'utils/callHelpers'\r\nimport { useMasterchef, useSousChef } from './useContract'\r\n\r\nconst useStake = (pid: number) => {\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleStake = useCallback(\r\n    async (amount: string, contract: Contract) => {\r\n      const txHash = await stake(contract?? masterChefContract, pid, amount, account, !!contract)\r\n      console.info(txHash)\r\n    },\r\n    [account, masterChefContract, pid],\r\n  )\r\n\r\n  return { onStake: handleStake }\r\n}\r\n\r\nexport const useSousStake = (sousId: number, isUsingBnb = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleStake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        await stake(masterChefContract, 0, amount, account)\r\n      } else if (isUsingBnb) {\r\n        await sousStakeBnb(sousChefContract, amount, account)\r\n      } else {\r\n        await sousStake(sousChefContract, amount, decimals, account)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n    },\r\n    [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onStake: handleStake }\r\n}\r\n\r\nexport default useStake\r\n","import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserBalance, updateUserPendingReward, updateUserStakedBalance } from 'state/actions'\r\nimport { exit, sousEmergencyUnstake, sousUnstake, unstake } from 'utils/callHelpers'\r\nimport { useLPStakingContract, useMasterchef, useSousChef } from './useContract'\r\n\r\nexport const useExit = (contract: string) => {\r\n  const { account } = useWeb3React()\r\n  const stakingContract = useLPStakingContract(contract)\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string) => {\r\n      const txHash = await exit(stakingContract, account)\r\n      console.info(txHash)\r\n    },\r\n    [account, stakingContract],\r\n  )\r\n\r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nconst useUnstake = (pid: number) => {\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string) => {\r\n      const txHash = await unstake(masterChefContract, pid, amount, account)\r\n      console.info(txHash)\r\n    },\r\n    [account, masterChefContract, pid],\r\n  )\r\n\r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nexport const useSousUnstake = (sousId, enableEmergencyWithdraw = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        const txHash = await unstake(masterChefContract, 0, amount, account)\r\n        console.info(txHash)\r\n      } else if (enableEmergencyWithdraw) {\r\n        const txHash = await sousEmergencyUnstake(sousChefContract, account)\r\n        console.info(txHash)\r\n      } else {\r\n        const txHash = await sousUnstake(sousChefContract, amount, decimals, account)\r\n        console.info(txHash)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n      dispatch(updateUserPendingReward(sousId, account))\r\n    },\r\n    [account, dispatch, enableEmergencyWithdraw, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nexport default useUnstake\r\n","import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserBalance, updateUserPendingReward } from 'state/actions'\r\nimport { soushHarvest, soushHarvestBnb, harvest, claim } from 'utils/callHelpers'\r\nimport { useLPStakingContract, useMasterchef, useSousChef } from './useContract'\r\n\r\nexport const useClaim = (stakingContract: string) => {\r\n  const { account } = useWeb3React()\r\n  const contract = useLPStakingContract(stakingContract)\r\n\r\n  const handleClaim = useCallback(async () => {\r\n    const txHash = await claim(contract, account)\r\n    return txHash\r\n  }, [account, contract])\r\n\r\n  return { onReward: handleClaim }\r\n}\r\n\r\nexport const useHarvest = (farmPid: number) => {\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleHarvest = useCallback(async () => {\r\n    const txHash = await harvest(masterChefContract, farmPid, account)\r\n    return txHash\r\n  }, [account, farmPid, masterChefContract])\r\n\r\n  return { onReward: handleHarvest }\r\n}\r\n\r\nexport const useSousHarvest = (sousId, isUsingBnb = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const sousChefContract = useSousChef(sousId)\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleHarvest = useCallback(async () => {\r\n    if (sousId === 0) {\r\n      await harvest(masterChefContract, 0, account)\r\n    } else if (isUsingBnb) {\r\n      await soushHarvestBnb(sousChefContract, account)\r\n    } else {\r\n      await soushHarvest(sousChefContract, account)\r\n    }\r\n    dispatch(updateUserPendingReward(sousId, account))\r\n    dispatch(updateUserBalance(sousId, account))\r\n  }, [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId])\r\n\r\n  return { onReward: handleHarvest }\r\n}\r\n","var baseOrderBy = require('./_baseOrderBy'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.sortBy` except that it allows specifying the sort\n * orders of the iteratees to sort by. If `orders` is unspecified, all values\n * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n * descending or \"asc\" for ascending sort order of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @param {string[]} [orders] The sort orders of `iteratees`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 34 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 36 }\n * ];\n *\n * // Sort by `user` in ascending order and by `age` in descending order.\n * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n */\nfunction orderBy(collection, iteratees, orders, guard) {\n  if (collection == null) {\n    return [];\n  }\n  if (!isArray(iteratees)) {\n    iteratees = iteratees == null ? [] : [iteratees];\n  }\n  orders = guard ? undefined : orders;\n  if (!isArray(orders)) {\n    orders = orders == null ? [] : [orders];\n  }\n  return baseOrderBy(collection, iteratees, orders);\n}\n\nmodule.exports = orderBy;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","import { useEffect, useState } from 'react'\r\nimport { SPARKSWAP_API, API_ASSETS, API_SUMMARY, API_LIQUIDITY, API_LASTPRICE } from 'config'\r\nimport useWeb3 from 'hooks/useWeb3'\r\nimport BigNumber from 'bignumber.js/bignumber'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { useMoralis, useMoralisWeb3Api } from 'react-moralis'\r\nimport { useWeb3React } from '@web3-react/core'\r\n\r\nconst networkFinder = (networkId: number) => {\r\n  switch (networkId) {\r\n    case 1:\r\n      return 'eth'\r\n    case 3:\r\n      return 'ropsten'\r\n    case 56:\r\n      return 'bsc'\r\n    case 97:\r\n      return 'bsc testnet'\r\n    default:\r\n      return 'eth'\r\n  }\r\n}\r\n\r\nexport const useTokenPrice = (tokenAddress: string) => {\r\n  const MoralisWeb3Api = useMoralisWeb3Api()\r\n  const { chainId } = useWeb3React()\r\n  let chainName: 'eth' | 'ropsten' | 'bsc' | 'bsc testnet' = 'eth'\r\n  switch (chainId) {\r\n    case 1:\r\n      chainName = 'eth'\r\n      break\r\n    case 3:\r\n      chainName = 'ropsten'\r\n      break\r\n    case 56:\r\n      chainName = 'bsc'\r\n      break\r\n    case 97:\r\n      chainName = 'bsc testnet'\r\n      break\r\n    default:\r\n      chainName = 'eth'\r\n      break\r\n  }\r\n\r\n  const [tokenPrice, setTokenPrice] = useState(0)\r\n  const web3 = useWeb3()\r\n\r\n  let _tokenAddress\r\n  try {\r\n    if (tokenAddress === undefined) throw new Error('Token address undefined')\r\n    _tokenAddress = web3.utils.toChecksumAddress(tokenAddress)\r\n  } catch {\r\n    console.error('Invalid staking and reward address')\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const result = await MoralisWeb3Api.token.getTokenPrice({ chain: chainName, address: _tokenAddress })\r\n        const _tokenPrice = result.usdPrice\r\n\r\n        setTokenPrice(_tokenPrice)\r\n      } catch (error) {\r\n        console.error('Unable to fetch data:', error)\r\n      }\r\n    }\r\n    fetchData()\r\n  }, [setTokenPrice, _tokenAddress, MoralisWeb3Api, chainName])\r\n\r\n  return { tokenPrice }\r\n}\r\n\r\nexport const usePoolPrice = (stakingTokenAddress: string, rewardTokenAddress: string, isFetchData?: boolean) => {\r\n  const MoralisWeb3Api = useMoralisWeb3Api()\r\n  const { chainId } = useWeb3React()\r\n  let chainName: 'eth' | 'ropsten' | 'bsc' | 'bsc testnet' = 'eth'\r\n  chainName = networkFinder(chainId)\r\n  const [stakingPrice, setStakingPrice] = useState(0)\r\n  const [rewardPrice, setRewardPrice] = useState(0)\r\n\r\n  const web3 = useWeb3()\r\n  let _stakingTokenAddress\r\n  let _rewardTokenAddress\r\n  try {\r\n    _stakingTokenAddress = web3.utils.toChecksumAddress(stakingTokenAddress)\r\n    _rewardTokenAddress = web3.utils.toChecksumAddress(rewardTokenAddress)\r\n  } catch {\r\n    console.error('Invalid staking and reward address')\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        let result\r\n        result = await MoralisWeb3Api.token.getTokenPrice({ chain: chainName, address: _stakingTokenAddress })\r\n        const _stakingTokenPrice = result.usdPrice\r\n\r\n        result = await MoralisWeb3Api.token.getTokenPrice({ chain: chainName, address: _rewardTokenAddress })\r\n        const _rewardTokenPrice = result.usdPrice\r\n\r\n        setStakingPrice(_stakingTokenPrice)\r\n        setRewardPrice(_rewardTokenPrice)\r\n      } catch (error) {\r\n        console.error('Unable to fetch data:', error)\r\n      }\r\n    }\r\n    if (isFetchData){\r\n      fetchData()\r\n    }\r\n    \r\n  }, [setStakingPrice, setRewardPrice, _stakingTokenAddress, _rewardTokenAddress, MoralisWeb3Api, chainName, isFetchData])\r\n\r\n  return { stakingPrice, rewardPrice }\r\n}\r\n\r\nexport const useFarmPrice = (\r\n  lpTotalSupply: number,\r\n  token1Address: string,\r\n  token2Address: string,\r\n  rewardTokenAddress: string,\r\n  lpAddress: string,\r\n  isFetchData?: boolean,\r\n) => {\r\n  const MoralisWeb3Api = useMoralisWeb3Api()\r\n  const { chainId } = useWeb3React()\r\n  const chainName = networkFinder(chainId)\r\n  const [LPPrice, setLPPrice] = useState(0)\r\n  const [rewardPrice, setRewardPrice] = useState(0)\r\n  const web3 = useWeb3()\r\n  let _token1Address\r\n  let _token2Address\r\n  let _rewardTokenAddress\r\n  let _lpAddress\r\n  try {\r\n    _token1Address = web3.utils.toChecksumAddress(token1Address)\r\n    _token2Address = web3.utils.toChecksumAddress(token2Address)\r\n    _rewardTokenAddress = web3.utils.toChecksumAddress(rewardTokenAddress)\r\n    _lpAddress = web3.utils.toChecksumAddress(lpAddress)\r\n  } catch {\r\n    console.error('Invalid staking and reward address')\r\n  }\r\n\r\n  useEffect(() => {\r\n    const findPrice = async (tokenAddress: string) => {\r\n      const result = await MoralisWeb3Api.token.getTokenPrice({ chain: chainName, address: tokenAddress })\r\n      const price = result.usdPrice\r\n      return price\r\n    }\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        let _totalToken1InPool\r\n        let _totalToken2InPool\r\n        // result = await MoralisWeb3Api.token.getTokenPrice({chain: chainName, address: _token1Address})\r\n        // result = await MoralisWeb3Api.token.getTokenPrice({chain: chainName, address: _token2Address})\r\n        // result = await MoralisWeb3Api.token.getTokenPrice({chain: chainName, address: _rewardTokenAddress})\r\n        const _token1Price = findPrice(_token1Address)\r\n        const _token2Price = findPrice(_token2Address)\r\n        const _rewardTokenPrice = findPrice(_rewardTokenAddress)\r\n        const res = MoralisWeb3Api.account.getTokenBalances({\r\n          chain: chainName,\r\n          address: _lpAddress,\r\n          token_addresses: [_token1Address, _token2Address],\r\n        })\r\n        const data = await Promise.all([_token1Price, _token2Price, _rewardTokenPrice, res])\r\n        const result = data[3]\r\n        if (result[0].token_address.toLowerCase() === _token1Address.toLowerCase()) {\r\n          _totalToken1InPool = getBalanceNumber(new BigNumber(result[0].balance), Number(result[0].decimals))\r\n        } else {\r\n          _totalToken2InPool = getBalanceNumber(new BigNumber(result[0].balance),  Number(result[0].decimals))\r\n        }\r\n\r\n        if (result[1].token_address.toLowerCase() === _token1Address.toLowerCase()) {\r\n          _totalToken1InPool = getBalanceNumber(new BigNumber(result[1].balance),  Number(result[1].decimals))\r\n        } else {\r\n          _totalToken2InPool = getBalanceNumber(new BigNumber(result[1].balance), Number(result[1].decimals))\r\n        }\r\n\r\n        setLPPrice((_totalToken1InPool * data[0] + _totalToken2InPool * data[1]) / lpTotalSupply)\r\n        setRewardPrice(data[2])\r\n      } catch (error) {\r\n        console.error('Unable to fetch data:', error)\r\n      }\r\n    }\r\n    if (isFetchData) {\r\n      fetchData()\r\n    }\r\n   \r\n   \r\n  }, [\r\n    isFetchData,\r\n    setLPPrice,\r\n    setRewardPrice,\r\n    lpTotalSupply,\r\n    _token1Address,\r\n    _token2Address,\r\n    _rewardTokenAddress,\r\n    _lpAddress,\r\n    chainName,\r\n    MoralisWeb3Api,\r\n  ])\r\n\r\n  return { LPPrice, rewardPrice }\r\n}\r\n\r\nexport default usePoolPrice\r\n","import styled from 'styled-components'\r\n\r\nexport const ActionContainer = styled.div`\r\n  padding: 16px;\r\n  border: 2px solid ${({ theme }) => theme.colors.MGG_active};\r\n  // border-radius: 16px;\r\n  flex-grow: 1;\r\n  flex-basis: 0;\r\n  margin-bottom: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: 12px;\r\n    margin-right: 12px;\r\n    margin-bottom: 0;\r\n    max-height: 100px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    margin-left: 48px;\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    max-height: 100px;\r\n  }\r\n`\r\n\r\nexport const ActionTitles = styled.div`\r\n  display: flex;\r\n`\r\n\r\nexport const ActionContent = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`\r\nexport const Earned = styled.div`\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n  color: ${({ theme }) => theme.colors.text};\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Modal, Text, LinkExternal, Flex, Box } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { tokenEarnedPerThousandDollarsCompounding, getRoi } from 'utils/compoundApyHelpers'\r\n\r\ninterface ApyCalculatorModalProps {\r\n  onDismiss?: () => void\r\n  tokenPrice: number\r\n  apr: number\r\n  linkLabel: string\r\n  linkHref: string\r\n  earningTokenSymbol?: string\r\n  roundingDecimals?: number\r\n  compoundFrequency?: number\r\n  performanceFee?: number\r\n}\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, auto);\r\n  grid-template-rows: repeat(4, auto);\r\n  margin-bottom: 12px;\r\n`\r\n\r\nconst GridItem = styled.div``\r\n\r\nconst GridHeaderItem = styled.div`\r\n  max-width: 180px;\r\n`\r\n\r\nconst ApyCalculatorModal: React.FC<ApyCalculatorModalProps> = ({\r\n  onDismiss,\r\n  tokenPrice,\r\n  apr,\r\n  linkLabel,\r\n  linkHref,\r\n  earningTokenSymbol = 'CAKE',\r\n  roundingDecimals = 2,\r\n  compoundFrequency = 1,\r\n  performanceFee = 0,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const oneThousandDollarsWorthOfToken = 1000 / tokenPrice\r\n\r\n  const tokenEarnedPerThousand1D = tokenEarnedPerThousandDollarsCompounding({\r\n    numberOfDays: 1,\r\n    farmApr: apr,\r\n    tokenPrice,\r\n    roundingDecimals,\r\n    compoundFrequency,\r\n    performanceFee,\r\n  })\r\n  const tokenEarnedPerThousand7D = tokenEarnedPerThousandDollarsCompounding({\r\n    numberOfDays: 7,\r\n    farmApr: apr,\r\n    tokenPrice,\r\n    roundingDecimals,\r\n    compoundFrequency,\r\n    performanceFee,\r\n  })\r\n  const tokenEarnedPerThousand30D = tokenEarnedPerThousandDollarsCompounding({\r\n    numberOfDays: 30,\r\n    farmApr: apr,\r\n    tokenPrice,\r\n    roundingDecimals,\r\n    compoundFrequency,\r\n    performanceFee,\r\n  })\r\n  const tokenEarnedPerThousand365D = tokenEarnedPerThousandDollarsCompounding({\r\n    numberOfDays: 365,\r\n    farmApr: apr,\r\n    tokenPrice,\r\n    roundingDecimals,\r\n    compoundFrequency,\r\n    performanceFee,\r\n  })\r\n\r\n  return (\r\n    <Modal title={t('ROI')} onDismiss={onDismiss}>\r\n      <Grid>\r\n        <GridHeaderItem>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" textTransform=\"uppercase\" mb=\"12px\">\r\n            {t('Timeframe')}\r\n          </Text>\r\n        </GridHeaderItem>\r\n        <GridHeaderItem>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" textTransform=\"uppercase\" mr=\"12px\" ml=\"12px\" mb=\"12px\">\r\n            {t('ROI')}\r\n          </Text>\r\n        </GridHeaderItem>\r\n        <GridHeaderItem>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" textTransform=\"uppercase\" mb=\"12px\">\r\n            {t('%symbol% per $1,000', { symbol: earningTokenSymbol })}\r\n          </Text>\r\n        </GridHeaderItem>\r\n        {/* 1 day row */}\r\n        <GridItem>\r\n          <Text>{t('%num%d', { num: 1 })}</Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text mr=\"12px\" ml=\"12px\">\r\n            {getRoi({ amountEarned: tokenEarnedPerThousand1D, amountInvested: oneThousandDollarsWorthOfToken }).toFixed(\r\n              roundingDecimals,\r\n            )}\r\n            %\r\n          </Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text>{tokenEarnedPerThousand1D}</Text>\r\n        </GridItem>\r\n        {/* 7 day row */}\r\n        <GridItem>\r\n          <Text>{t('%num%d', { num: 7 })}</Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text mr=\"12px\" ml=\"12px\">\r\n            {getRoi({ amountEarned: tokenEarnedPerThousand7D, amountInvested: oneThousandDollarsWorthOfToken }).toFixed(\r\n              roundingDecimals,\r\n            )}\r\n            %\r\n          </Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text>{tokenEarnedPerThousand7D}</Text>\r\n        </GridItem>\r\n        {/* 30 day row */}\r\n        <GridItem>\r\n          <Text>{t('%num%d', { num: 30 })}</Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text mr=\"12px\" ml=\"12px\">\r\n            {getRoi({\r\n              amountEarned: tokenEarnedPerThousand30D,\r\n              amountInvested: oneThousandDollarsWorthOfToken,\r\n            }).toFixed(roundingDecimals)}\r\n            %\r\n          </Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text>{tokenEarnedPerThousand30D}</Text>\r\n        </GridItem>\r\n        {/* 365 day / APY row */}\r\n        <GridItem style={{ maxWidth: '180px' }}>\r\n          <Text>{t('365d(APY)')}</Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text mr=\"12px\" ml=\"12px\">\r\n            {getRoi({\r\n              amountEarned: tokenEarnedPerThousand365D,\r\n              amountInvested: oneThousandDollarsWorthOfToken,\r\n            }).toFixed(roundingDecimals)}\r\n            %\r\n          </Text>\r\n        </GridItem>\r\n        <GridItem>\r\n          <Text>{tokenEarnedPerThousand365D}</Text>\r\n        </GridItem>\r\n      </Grid>\r\n      <Flex justifyContent=\"center\">\r\n        <Box mb=\"28px\" maxWidth=\"280px\">\r\n          <Text fontSize=\"12px\" textAlign=\"center\" color=\"textSubtle\">\r\n            {t(\r\n              'Calculated based on current rates. Compounding %freq%x daily. Rates are estimates provided for your convenience only, and by no means represent guaranteed returns.',\r\n              { freq: compoundFrequency.toLocaleString() },\r\n            )}\r\n          </Text>\r\n          {performanceFee > 0 && (\r\n            <Text mt=\"14px\" fontSize=\"12px\" textAlign=\"center\" color=\"textSubtle\">\r\n              {t('All estimated rates take into account this pool’s %fee%% performance fee', { fee: performanceFee })}\r\n            </Text>\r\n          )}\r\n        </Box>\r\n      </Flex>\r\n      <Flex justifyContent=\"center\">\r\n        <LinkExternal href={linkHref}>{linkLabel}</LinkExternal>\r\n      </Flex>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ApyCalculatorModal\r\n","import React from 'react'\r\nimport { Tag, VerifiedIcon, CommunityIcon, BinanceIcon, RefreshIcon, AutoRenewIcon, TagProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst CoreTag: React.FC<TagProps> = (props) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Tag variant=\"secondary\" outline startIcon={<VerifiedIcon width=\"18px\" color=\"secondary\" mr=\"4px\" />} {...props}>\r\n      {t('Core')}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nconst CommunityTag: React.FC<TagProps> = (props) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Tag variant=\"failure\" outline startIcon={<CommunityIcon width=\"18px\" color=\"failure\" mr=\"4px\" />} {...props}>\r\n      {t('Community')}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nconst BinanceTag: React.FC<TagProps> = (props) => {\r\n  return (\r\n    <Tag variant=\"binance\" outline startIcon={<BinanceIcon width=\"18px\" color=\"secondary\" mr=\"4px\" />} {...props}>\r\n      Binance\r\n    </Tag>\r\n  )\r\n}\r\n\r\nconst DualTag: React.FC<TagProps> = (props) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Tag variant=\"textSubtle\" outline {...props}>\r\n      {t('Dual')}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nconst ManualPoolTag: React.FC<TagProps> = (props) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Tag variant=\"secondary\" outline startIcon={<RefreshIcon width=\"18px\" color=\"secondary\" mr=\"4px\" />} {...props}>\r\n      {t('Manual')}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nconst CompoundingPoolTag: React.FC<TagProps> = (props) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Tag variant=\"success\" outline startIcon={<AutoRenewIcon width=\"18px\" color=\"success\" mr=\"4px\" />} {...props}>\r\n      {t('Auto')}\r\n    </Tag>\r\n  )\r\n}\r\n\r\nexport { CoreTag, CommunityTag, BinanceTag, DualTag, ManualPoolTag, CompoundingPoolTag }\r\n","\r\nimport React, {useRef, useEffect} from 'react';\r\n\r\nfunction usePrevious(value) {\r\n    const ref = React.useRef();\r\n    useEffect(() => {\r\n        ref.current = value;\r\n    }, [value]); \r\n    return ref.current;\r\n}\r\n\r\nexport default usePrevious;","import styled from 'styled-components'\r\n\r\nconst FlexLayout = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  & > * {\r\n    min-width: 280px;\r\n    max-width: 31.5%;\r\n    min-height: 500px;\r\n    height: auto;\r\n    width: 100%;\r\n    margin: 0 8px;\r\n    margin-bottom: 32px;\r\n  }\r\n`\r\n\r\nexport default FlexLayout\r\n","export const Latinise = {\r\n  latin_map: {\r\n    τ: 't',\r\n    Τ: 'T',\r\n  },\r\n}\r\n\r\nexport const latinise = (input: string) => {\r\n  return input.replace(/[^A-Za-z0-9[\\] ]/g, (x) => Latinise.latin_map[x] || x)\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nexport default styled.div`\r\n  background-color: ${({ theme }) => theme.colors.textSubtle};\r\n  height: 1px;\r\n  margin: 0 auto 32px;\r\n  width: 100%;\r\n`\r\n\r\nexport const StyledHr = styled.div`\r\n  border-style: solid none none none;\r\n  border-width: 2px;\r\n  border-color: ${({ theme }) => theme.colors.primary};\r\n  width: 95%;\r\n`\r\n\r\nexport const ModalHr = styled.hr`\r\n  border-style: solid none none none;\r\n  border-width: 2px;\r\n  border-color: ${({ theme }) => theme.colors.primary};\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n`\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { Text, Flex, LinkExternal, Skeleton } from '@pancakeswap/uikit'\r\n\r\nexport interface ExpandableSectionProps {\r\n  stakingAddress?: string\r\n  lpInfoAddress?: string\r\n  removed?: boolean\r\n  totalValueFormatted?: string\r\n  lpLabel?: string\r\n  addLiquidityUrl?: string\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 24px;\r\n`\r\n\r\nconst StyledLinkExternal = styled(LinkExternal)`\r\n  font-weight: 400;\r\n`\r\n\r\nconst DetailsSection: React.FC<ExpandableSectionProps> = ({\r\n  stakingAddress,\r\n  lpInfoAddress,\r\n}) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Wrapper>\r\n      {/* <Flex justifyContent=\"space-between\">\r\n        <Text>{t('Total Liquidity')}:</Text>\r\n        {totalValueFormatted ? <Text>{totalValueFormatted}</Text> : <Skeleton width={75} height={25} />}\r\n      </Flex>\r\n      {!removed && (\r\n        <StyledLinkExternal href={addLiquidityUrl}>{t('Get %symbol%', { symbol: lpLabel })}</StyledLinkExternal>\r\n      )} */}\r\n      <StyledLinkExternal href={stakingAddress}>View Staking Contract</StyledLinkExternal>\r\n      { lpInfoAddress && <StyledLinkExternal href={lpInfoAddress}>{t('See Pair Info')}</StyledLinkExternal> }\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default DetailsSection\r\n","import { useState, useEffect } from 'react'\r\n\r\n/**\r\n * Use this hook when you want to animate something when it appears on the screen (e.g. when some prop set to true)\r\n * but when its not on the screen you want it to be fully unmounted and not just hidden or height 0.\r\n * This is especially useful when you have a table of 100s rows and each row has expandable element that appears on click.\r\n * If you just set the expanding animation while keeping inactive elements mounted all those 100 elements will load the DOM,\r\n * and if they all receive updates via props you're looking at 100 DOM updates for hidden elements.\r\n * This hook \"shows\" element immediately when the isMounted is true\r\n * but keeps element mounted for delayTime to let unmounting animation happen, after which you unmount element completely.\r\n * delayTime should be the same as animation time in most cases.\r\n */\r\nconst useDelayedUnmount = (isMounted: boolean, delayTime: number) => {\r\n  const [shouldRender, setShouldRender] = useState(false)\r\n\r\n  useEffect(() => {\r\n    let timeoutId: ReturnType<typeof setTimeout>\r\n    if (isMounted && !shouldRender) {\r\n      setShouldRender(true)\r\n    } else if (!isMounted && shouldRender) {\r\n      timeoutId = setTimeout(() => setShouldRender(false), delayTime)\r\n    }\r\n    return () => clearTimeout(timeoutId)\r\n  }, [isMounted, delayTime, shouldRender])\r\n  return shouldRender\r\n}\r\n\r\nexport default useDelayedUnmount\r\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box } from '@pancakeswap/uikit'\r\nimport Container from '../layout/Container'\r\n\r\nconst Outer = styled(Box)<{ background?: string }>`\r\n  background: ${({ theme, background }) => theme.isDark? `linear-gradient(0deg, rgba(43,28,0,1) 5%, rgba(16,16,16,1) 100%)` : theme.colors.modal};\r\n  // background:  rgb(43,28,0);\r\n  // background: linear-gradient(0deg, rgba(43,28,0,1) 5%, rgba(16,16,16,1) 100%);\r\n`\r\n\r\nconst Inner = styled(Container)`\r\n  padding-top: 32px;\r\n  padding-bottom: 32px;\r\n`\r\n\r\nconst PageHeader: React.FC<{ background?: string }> = ({ background, children, ...props }) => (\r\n  <Outer background={background} {...props}>\r\n    <Inner>{children}</Inner>\r\n  </Outer>\r\n)\r\n\r\nexport default PageHeader\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, Flex, Input, InputProps } from '@metagg/mgg-uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface ModalInputProps {\r\n  max: string\r\n  symbol: string\r\n  onSelectMax?: () => void\r\n  onChange: (e: React.FormEvent<HTMLInputElement>) => void\r\n  placeholder?: string\r\n  value: string\r\n  addLiquidityUrl?: string\r\n  inputTitle?: string\r\n  decimals?: number\r\n}\r\n\r\nconst getBoxShadow = ({ isWarning = false, theme }) => {\r\n  if (isWarning) {\r\n    return theme.shadows.warning\r\n  }\r\n\r\n  return theme.shadows.inset\r\n}\r\n\r\nconst StyledTokenInput = styled.div<InputProps>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: transparent;\r\n  border: 2px solid ${({ theme }) => theme.colors.primary};\r\n    // box-shadow: ${getBoxShadow};\r\n  color: ${({ theme }) => theme.colors.text};\r\n  padding: 8px 16px 8px 0;\r\n  width: 100%;\r\n`\r\n\r\nconst StyledInput = styled(Input)`\r\n  box-shadow: none;\r\n  flex: 1;\r\n  margin: 0 8px;\r\n  padding: 0 8px;\r\n  background: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.xs} {\r\n    width: 80px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    width: auto;\r\n  }\r\n\r\n  &:focus:not(:disabled) {\r\n    box-shadow: none;\r\n  }\r\n`\r\n\r\n// const StyledErrorMessage = styled(Text)`\r\n//   position: absolute;\r\n//   bottom: -22px;\r\n//\r\n//   a {\r\n//     display: inline;\r\n//   }\r\n// `\r\n\r\nconst ModalInput: React.FC<ModalInputProps> = ({\r\n                                                 max,\r\n                                                 // symbol,\r\n                                                 onChange,\r\n                                                 onSelectMax,\r\n                                                 value,\r\n                                                 // addLiquidityUrl,\r\n                                                 // inputTitle,\r\n                                                 decimals = 18,\r\n                                               }) => {\r\n  const { t } = useTranslation()\r\n  const isBalanceZero = max === '0' || !max\r\n\r\n  // const displayBalance = (balance: string) => {\r\n  //   if (isBalanceZero) {\r\n  //     return '0'\r\n  //   }\r\n  //   const balanceBigNumber = new BigNumber(balance)\r\n  //   if (balanceBigNumber.gt(0) && balanceBigNumber.lt(0.0001)) {\r\n  //     return balanceBigNumber.toLocaleString()\r\n  //   }\r\n  //   return balanceBigNumber.toFixed(3, BigNumber.ROUND_DOWN)\r\n  // }\r\n\r\n  return (\r\n    <div style={{ position: 'relative', margin: '15px 0px' }}>\r\n      <StyledTokenInput isWarning={isBalanceZero}>\r\n        {/* <Flex justifyContent=\"space-between\" pl=\"16px\">\r\n          <Text fontSize=\"14px\">{inputTitle}</Text>\r\n        </Flex> */}\r\n        <Flex alignItems='flex-end' justifyContent='space-around'>\r\n          <StyledInput\r\n            pattern={`^[0-9]*[.,]?[0-9]{0,${decimals}}$`}\r\n            inputMode='decimal'\r\n            step='any'\r\n            min='0'\r\n            onChange={onChange}\r\n            placeholder='0'\r\n            value={value}\r\n          />\r\n          <Button size='sm' onClick={onSelectMax} mr='8px' mb='4px'>\r\n            {t('Max')}\r\n          </Button>\r\n          {/* <Text fontSize=\"16px\">{symbol}</Text> */}\r\n        </Flex>\r\n      </StyledTokenInput>\r\n      <Flex>\r\n        {/* <Text fontSize=\"14px\" color=\"textSubtle\">\r\n            {t('Available')}: {getFullDisplayBalance}\r\n          </Text>  */}\r\n\r\n\r\n      </Flex>\r\n      {/* {isBalanceZero && (\r\n        <StyledErrorMessage fontSize=\"14px\" color=\"failure\">\r\n          {t('No tokens to stake')}:{' '}\r\n          <Link fontSize=\"14px\" bold={false} href={addLiquidityUrl} external color=\"failure\">\r\n            {t('Get %symbol%', { symbol })}\r\n          </Link>\r\n        </StyledErrorMessage>\r\n      )} */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalInput\r\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nmodule.exports = partition;\n","import { Contract } from '@ethersproject/contracts'\r\nimport { getAddress } from '@ethersproject/address'\r\nimport { AddressZero } from '@ethersproject/constants'\r\nimport { JsonRpcSigner, Web3Provider } from '@ethersproject/providers'\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\nimport { ChainId, CurrencyAmount, JSBI, Percent } from '@pancakeswap-libs/sdk'\r\nimport { BASE_BSC_SCAN_URLS, BASE_ETH_SCAN_URLS } from '../config'\r\n\r\n// returns the checksummed address if the address is valid, otherwise returns false\r\nexport function isAddress(value: any): string | false {\r\n  try {\r\n    return getAddress(value)\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\nexport function getBscScanLink(\r\n  data: string | number,\r\n  type: 'transaction' | 'token' | 'address' | 'block' | 'countdown',\r\n  chainId: ChainId = ChainId.MAINNET,\r\n): string {\r\n  switch (type) {\r\n    case 'transaction': {\r\n      return `${BASE_BSC_SCAN_URLS[chainId]}/tx/${data}`\r\n    }\r\n    case 'token': {\r\n      return `${BASE_BSC_SCAN_URLS[chainId]}/token/${data}`\r\n    }\r\n    case 'block': {\r\n      return `${BASE_BSC_SCAN_URLS[chainId]}/block/${data}`\r\n    }\r\n    case 'countdown': {\r\n      return `${BASE_BSC_SCAN_URLS[chainId]}/block/countdown/${data}`\r\n    }\r\n    default: {\r\n      return `${BASE_BSC_SCAN_URLS[chainId]}/address/${data}`\r\n    }\r\n  }\r\n}\r\nexport function getEthScanLink(\r\n  data: string | number,\r\n  type: 'transaction' | 'token' | 'address' | 'block' | 'countdown',\r\n  chainId: ChainId = ChainId.MAINNET,\r\n): string {\r\n  switch (type) {\r\n    case 'transaction': {\r\n      return `${BASE_ETH_SCAN_URLS[chainId]}/tx/${data}`\r\n    }\r\n    case 'token': {\r\n      return `${BASE_ETH_SCAN_URLS[chainId]}/token/${data}`\r\n    }\r\n    case 'block': {\r\n      return `${BASE_ETH_SCAN_URLS[chainId]}/block/${data}`\r\n    }\r\n    case 'countdown': {\r\n      return `${BASE_ETH_SCAN_URLS[chainId]}/block/countdown/${data}`\r\n    }\r\n    default: {\r\n      return `${BASE_ETH_SCAN_URLS[chainId]}/address/${data}`\r\n    }\r\n  }\r\n}\r\n\r\n// shorten the checksummed version of the input address to have 0x + 4 characters at start and end\r\nexport function shortenAddress(address: string, chars = 4): string {\r\n  const parsed = isAddress(address)\r\n  if (!parsed) {\r\n    throw Error(`Invalid 'address' parameter '${address}'.`)\r\n  }\r\n  return `${parsed.substring(0, chars + 2)}...${parsed.substring(42 - chars)}`\r\n}\r\n\r\n// add 10%\r\nexport function calculateGasMargin(value: BigNumber): BigNumber {\r\n  return value.mul(BigNumber.from(10000).add(BigNumber.from(1000))).div(BigNumber.from(10000))\r\n}\r\n\r\n// converts a basis points value to a sdk percent\r\nexport function basisPointsToPercent(num: number): Percent {\r\n  return new Percent(JSBI.BigInt(num), JSBI.BigInt(10000))\r\n}\r\n\r\nexport function calculateSlippageAmount(value: CurrencyAmount, slippage: number): [JSBI, JSBI] {\r\n  if (slippage < 0 || slippage > 10000) {\r\n    throw Error(`Unexpected slippage value: ${slippage}`)\r\n  }\r\n  return [\r\n    JSBI.divide(JSBI.multiply(value.raw, JSBI.BigInt(10000 - slippage)), JSBI.BigInt(10000)),\r\n    JSBI.divide(JSBI.multiply(value.raw, JSBI.BigInt(10000 + slippage)), JSBI.BigInt(10000)),\r\n  ]\r\n}\r\n\r\n// account is not optional\r\nexport function getSigner(library: Web3Provider, account: string): JsonRpcSigner {\r\n  return library.getSigner(account).connectUnchecked()\r\n}\r\n\r\n// account is optional\r\nexport function getProviderOrSigner(library: Web3Provider, account?: string): Web3Provider | JsonRpcSigner {\r\n  return account ? getSigner(library, account) : library\r\n}\r\n\r\n// account is optional\r\nexport function getContract(address: string, ABI: any, library: Web3Provider, account?: string): Contract {\r\n  if (!isAddress(address) || address === AddressZero) {\r\n    throw Error(`Invalid 'address' parameter '${address}'.`)\r\n  }\r\n\r\n  return new Contract(address, ABI, getProviderOrSigner(library, account) as any)\r\n}\r\n\r\nexport function escapeRegExp(string: string): string {\r\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\r\n}\r\n","import styled, { css, keyframes } from 'styled-components'\r\nimport { Card } from '@sparkpointio/sparkswap-uikit'\r\n\r\nconst PromotedGradient = keyframes`\r\n  0% {\r\n    background-position: 50% 0%;\r\n  }\r\n  50% {\r\n    background-position: 50% 100%;\r\n  }\r\n  100% {\r\n    background-position: 50% 0%;\r\n  }\r\n`\r\n\r\nexport const StyledCard = styled.div<{ isPromotedPool?: boolean; isFinished?: boolean }>`\r\n  border: 5px solid ${(props) => props.theme.colors.MGG_active};\r\n  max-width: 450px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-self: baseline;\r\n  position: relative;\r\n  justify-content: space-around;\r\n  background: ${(props) => props.theme.colors.MGG_container};\r\n  color: ${({ isFinished, theme }) => theme.colors[isFinished ? 'textDisabled' : 'secondary']};\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin: 0 12px 46px;\r\n  }\r\n`\r\n\r\nexport const StyledCardInner = styled.div<{ isPromotedPool?: boolean }>`\r\n  background: ${({ theme }) => theme.card.background};\r\n\r\n  // border-radius: ${({ isPromotedPool, theme }) => (isPromotedPool ? '31px' : theme.radii.card)};\r\n`\r\n\r\nexport default StyledCard\r\n","import React from 'react'\r\nimport { TokenPairImage, ImageProps } from '@pancakeswap/uikit'\r\nimport tokens from 'config/constants/tokens'\r\nimport { getAddress } from 'utils/addressHelpers'\r\n\r\nconst CakeVaultTokenPairImage: React.FC<Omit<ImageProps, 'src'>> = (props) => {\r\n  const primaryTokenSrc = `/images/tokens/${getAddress(tokens.cake.address)}.svg`\r\n\r\n  return <TokenPairImage primarySrc={primaryTokenSrc} secondarySrc=\"/images/tokens/autorenew.svg\" {...props} />\r\n}\r\n\r\nexport default CakeVaultTokenPairImage\r\n","import React, { useContext } from 'react'\r\nimport { Heading, Text, Flex, Image } from '@sparkpointio/sparkswap-uikit'\r\nimport styled, { ThemeContext } from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Token } from 'config/constants/types'\r\nimport TokenPairImage from 'components/TokenPairImage'\r\nimport CakeVaultTokenPairImage from '../CakeVaultCard/CakeVaultTokenPairImage'\r\n\r\nconst Wrapper = styled.div<{ isFinished?: boolean; background?: string }>`\r\nborder-bottom: 5px solid ${(({theme}) => theme.colors.MGG_active)};\r\npadding: 24px;\r\n  svg {\r\n    margin-right: 4px;\r\n  }\r\n`\r\n//  background: ${({ isFinished, background, theme }) =>\r\n// isFinished ? theme.colors.backgroundDisabled : theme.colors.gradients[background]};\r\n// border-radius: ${({ theme, isPromotedPool }) =>\r\n// isPromotedPool ? '31px 31px 0 0' : `${theme.radii.card} ${theme.radii.card} 0 0`};\r\nconst StyledCardHeader: React.FC<{\r\n  earningToken: Token\r\n  stakingToken: Token\r\n  isAutoVault?: boolean\r\n  isFinished?: boolean\r\n  isStaking?: boolean\r\n}> = ({ earningToken, stakingToken, isFinished = false, isAutoVault = false, isStaking = false }) => {\r\n  const { t } = useTranslation()\r\n  const isCakePool = earningToken.symbol === 'CAKE' && stakingToken.symbol === 'CAKE'\r\n  // const background = isStaking ? 'bubblegum' : 'cardHeader'\r\n  const background = 'cardHeader'\r\n\r\n/*\r\n  const getHeadingPrefix = () => {\r\n    if (isAutoVault) {\r\n      // vault\r\n      return t('Auto')\r\n    }\r\n    if (isCakePool) {\r\n      // manual cake\r\n      return t('Manual')\r\n    }\r\n    // all other pools\r\n    return t('Earn')\r\n  }\r\n*/\r\n\r\n  const getCardTitle = () => {\r\n    if (isAutoVault) {\r\n      return t('Automatic restaking')\r\n    }\r\n    if (isCakePool) {\r\n      return t(`Stake CAKE to Earn CAKE`)\r\n    }\r\n    return t('Stake %symbol%', { symbol: stakingToken.symbol })\r\n    // return t('Stake %symbol% to Earn SRK', { symbol: stakingToken.symbol } )\r\n  }\r\n  const theme = useContext(ThemeContext);\r\n\r\n  return (\r\n    <Wrapper isFinished={isFinished} background={background}>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n        <Flex flexDirection=\"column\" style={{textAlign: 'left'}}>\r\n          <Heading color='text' size=\"lg\">\r\n            {`Stake ${stakingToken.symbol}`} <br/>\r\n            to <br />\r\n            {`Earn ${earningToken.symbol}`}\r\n          </Heading>\r\n        </Flex>\r\n        {isAutoVault ? (\r\n          <CakeVaultTokenPairImage width={64} height={64} />\r\n        ) : (\r\n          <TokenPairImage primaryToken={stakingToken} secondaryToken={earningToken} width={64} height={64} />\r\n        )}\r\n      </Flex>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default StyledCardHeader\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { Modal, Text, Button, OpenNewIcon, Link } from '@pancakeswap/uikit'\r\nimport { BASE_EXCHANGE_URL } from 'config'\r\nimport useTheme from 'hooks/useTheme'\r\n\r\ninterface NotEnoughTokensModalProps {\r\n  tokenSymbol: string\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  width: 100%;\r\n`\r\n\r\nconst NotEnoughTokensModal: React.FC<NotEnoughTokensModalProps> = ({ tokenSymbol, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n\r\n  return (\r\n    <Modal\r\n      title={t('%symbol% required', { symbol: tokenSymbol })}\r\n      onDismiss={onDismiss}\r\n    >\r\n      <Text color=\"failure\" bold>\r\n        {t('Insufficient %symbol% balance', { symbol: tokenSymbol })}\r\n      </Text>\r\n      <Text mt=\"24px\">{t('You’ll need %symbol% to stake in this pool!', { symbol: tokenSymbol })}</Text>\r\n      <Text>\r\n        {t('Buy some %symbol%, or make sure your %symbol% isn’t in another pool or LP.', {\r\n          symbol: tokenSymbol,\r\n        })}\r\n      </Text>\r\n      <Button mt=\"24px\" as=\"a\" external href={BASE_EXCHANGE_URL}>\r\n        {t('Buy')} {tokenSymbol}\r\n      </Button>\r\n      <StyledLink href=\"https://yieldwatch.net\" external>\r\n        <Button variant=\"secondary\" mt=\"8px\" width=\"100%\">\r\n          {t('Locate Assets')}\r\n          <OpenNewIcon color=\"primary\" ml=\"4px\" />\r\n        </Button>\r\n      </StyledLink>\r\n      <Button variant=\"text\" onClick={onDismiss}>\r\n        {t('Close Window')}\r\n      </Button>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default NotEnoughTokensModal\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronDown = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"6 9 12 15 18 9\"\n  }));\n});\nChevronDown.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronDown.displayName = 'ChevronDown';\nexport default ChevronDown;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ChevronUp = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"18 15 12 9 6 15\"\n  }));\n});\nChevronUp.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nChevronUp.displayName = 'ChevronUp';\nexport default ChevronUp;","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { ListViewIcon, CardViewIcon, IconButton } from '@pancakeswap/uikit'\r\n\r\nexport enum ViewMode {\r\n  'TABLE' = 'TABLE',\r\n  'CARD' = 'CARD',\r\n}\r\n\r\ninterface ToggleViewProps {\r\n  viewMode: ViewMode\r\n  onToggle: (mode: ViewMode) => void\r\n}\r\n\r\nconst Container = styled.div`\r\n  margin-right: 0px;\r\n  margin-left: -8px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: 0;\r\n    margin-right: 16px;\r\n  }\r\n`\r\n\r\nconst ToggleView: React.FunctionComponent<ToggleViewProps> = ({ viewMode, onToggle }) => {\r\n  const handleToggle = (mode: ViewMode) => {\r\n    if (viewMode !== mode) {\r\n      onToggle(mode)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <IconButton variant=\"text\" scale=\"sm\" id=\"clickPoolCardView\" onClick={() => handleToggle(ViewMode.CARD)}>\r\n        <CardViewIcon color={viewMode === ViewMode.CARD ? 'primary' : 'textDisabled'} />\r\n      </IconButton>\r\n      <IconButton variant=\"text\" scale=\"sm\" id=\"clickPoolTableView\" onClick={() => handleToggle(ViewMode.TABLE)}>\r\n        <ListViewIcon color={viewMode === ViewMode.TABLE ? 'primary' : 'textDisabled'} />\r\n      </IconButton>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default ToggleView\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Slider, BalanceInput, AutoRenewIcon, Link } from '@pancakeswap/uikit'\r\nimport { Modal, Text, Flex, Image, Button } from '@metagg/mgg-uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BASE_EXCHANGE_URL } from 'config'\r\nimport { useSousStake } from 'hooks/useStake'\r\nimport { useSousUnstake } from 'hooks/useUnstake'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useToast from 'hooks/useToast'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useSousApprove, useSousApproveWithAmount } from 'hooks/useApprove'\r\nimport { useTokenAllowance } from 'hooks/useTokenBalance'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount, getBalanceNumber } from 'utils/formatBalance'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { Pool } from 'state/types'\r\nimport ModalInput from 'components/ModalInput'\r\nimport { getAddress } from 'utils/addressHelpers'\r\nimport PercentageButton from './PercentageButton'\r\n\r\ninterface StakeModalProps {\r\n  isBnbPool: boolean\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n  stakingTokenPrice: number\r\n  isRemovingStake?: boolean\r\n  onSelectMax?: () => void\r\n  onDismiss?: () => void\r\n  isApprove?: boolean\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  width: 100%;\r\n`\r\n\r\nconst ModalBody = styled(Flex)`\r\n  width: 450px;\r\n  margin-top: -20px;\r\n  padding: 20px;\r\n`\r\nconst StakeActionModal: React.FC<StakeModalProps> = ({\r\n  isBnbPool,\r\n  pool,\r\n  stakingTokenBalance,\r\n  stakingTokenPrice,\r\n  isRemovingStake = false,\r\n  onDismiss,\r\n  isApprove = false,\r\n}) => {\r\n  const { sousId, stakingToken, userData, stakingLimit, earningToken } = pool\r\n  const approveBtn = useRef(null)\r\n  const stakingTokenContract = useERC20(stakingToken.address ? getAddress(stakingToken.address) : '')\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { onStake } = useSousStake(sousId, isBnbPool)\r\n  const { onUnstake } = useSousUnstake(sousId, pool.enableEmergencyWithdraw)\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  // const [approvedTx, setApprovedTx] = useState(false)\r\n  const [isApproved, setIsApproved] = useState(isApprove)\r\n  const [stakeAmount, setStakeAmount] = useState('')\r\n  const [hasReachedStakeLimit, setHasReachedStakedLimit] = useState(false)\r\n  const [percent, setPercent] = useState(0)\r\n  const userLimit = stakingLimit.minus(userData.stakedBalance)\r\n  const totalStakedTokens = userData?.stakedBalance\r\n    ? getBalanceNumber(new BigNumber(userData.stakedBalance), stakingToken.decimals)\r\n    : BIG_ZERO\r\n  const numTotalStaked = totalStakedTokens\r\n  const totalStakingTokens = userData?.stakingTokenBalance\r\n    ? getBalanceNumber(new BigNumber(userData.stakingTokenBalance), stakingToken.decimals)\r\n    : BIG_ZERO\r\n  const remainingStakeTokens = userData?.stakedBalance\r\n    ? getBalanceNumber(new BigNumber(pool.stakingLimit.minus(userData.stakedBalance)), stakingToken.decimals)\r\n    : BIG_ZERO\r\n  const totalAllowance = useTokenAllowance(stakingToken.address[pool.chainId], pool.contractAddress[pool.chainId])\r\n  const { handleApprove, requestedApproval } = useSousApproveWithAmount(\r\n    stakingTokenContract,\r\n    sousId,\r\n    earningToken.symbol,\r\n    getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals),\r\n  )\r\n  const getCalculatedStakingLimit = () => {\r\n    if (isRemovingStake) {\r\n      return userData.stakedBalance\r\n    }\r\n    return stakingLimit.gt(BIG_ZERO) && stakingTokenBalance.gt(userLimit) ? userLimit : stakingTokenBalance\r\n  }\r\n  const usdValueStaked = stakeAmount && formatNumber(new BigNumber(stakeAmount).times(stakingTokenPrice).toNumber())\r\n\r\n  useEffect(() => {\r\n    if (stakingLimit.gt(0) && !isRemovingStake) {\r\n      const fullDecimalStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)\r\n      setHasReachedStakedLimit(fullDecimalStakeAmount.plus(userData.stakedBalance).gt(stakingLimit))\r\n    }\r\n    setIsApproved(totalAllowance.balance.gte(getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)))\r\n  }, [\r\n    requestedApproval,\r\n    stakeAmount,\r\n    stakingLimit,\r\n    userData,\r\n    stakingToken,\r\n    isRemovingStake,\r\n    totalAllowance,\r\n    setHasReachedStakedLimit,\r\n  ])\r\n\r\n  const handleStakeInputChange = (input: string) => {\r\n    if (input) {\r\n      const convertedInput = getDecimalAmount(new BigNumber(input), stakingToken.decimals)\r\n      const percentage = Math.floor(convertedInput.dividedBy(getCalculatedStakingLimit()).multipliedBy(100).toNumber())\r\n      setPercent(Math.min(percentage, 100))\r\n    } else {\r\n      setPercent(0)\r\n    }\r\n    setStakeAmount(input)\r\n  }\r\n\r\n  const handleChangePercent = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const percentageOfStakingMax = getCalculatedStakingLimit().dividedBy(100).multipliedBy(sliderPercent)\r\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals)\r\n      setStakeAmount(amountToStake)\r\n    } else {\r\n      setStakeAmount('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  // const handleApproveClick = async () => {\r\n  //   setApprovedTx(true)\r\n  // }\r\n\r\n  const handleConfirmClick = async () => {\r\n    setPendingTx(true)\r\n\r\n    if (isRemovingStake) {\r\n      // unstaking\r\n      try {\r\n        await onUnstake(stakeAmount, stakingToken.decimals)\r\n        toastSuccess(\r\n          `${t('Unstaked')}!`,\r\n          t('Your %symbol% earnings have also been harvested to your wallet!', {\r\n            symbol: earningToken.symbol,\r\n          }),\r\n        )\r\n        setPendingTx(false)\r\n        setIsApproved(false)\r\n        onDismiss()\r\n      } catch (e) {\r\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'))\r\n        setPendingTx(false)\r\n      }\r\n    } else {\r\n      try {\r\n        // staking\r\n        await onStake(stakeAmount, stakingToken.decimals)\r\n        toastSuccess(\r\n          `${t('Staked')}!`,\r\n          t('Your %symbol% funds have been staked in the pool!', {\r\n            symbol: stakingToken.symbol,\r\n          }),\r\n        )\r\n        setPendingTx(false)\r\n        onDismiss()\r\n      } catch (e) {\r\n        toastError(t('Canceled'), t('Please try again and confirm the transaction.'))\r\n        setPendingTx(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal title=\"\" onDismiss={onDismiss}>\r\n      <ModalBody flexDirection=\"column\">\r\n        {/* {stakingLimit.gt(0) && !isRemovingStake && (\r\n          <Text color=\"secondary\" bold mb=\"24px\" style={{ textAlign: 'center' }} fontSize=\"16px\">\r\n            {t('Max stake for this pool: %amount% %token%', {\r\n              amount: getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0),\r\n              token: stakingToken.symbol,\r\n            })}\r\n          </Text>\r\n        )} */}\r\n\r\n        <Flex justifyContent=\"center\">\r\n          <Text color=\"textSubtle\" fontSize=\"14px\" mb=\"38px\" mt=\"-48px\" style={{ textAlign: 'center' }}>\r\n            {t('Maximum stakable amount in this pool: %maxstake% %tokensymbol%', {\r\n              maxstake: getFullDisplayBalance(stakingLimit, stakingToken.decimals),\r\n              tokensymbol: pool.stakingToken.symbol,\r\n            })}\r\n          </Text>\r\n        </Flex>\r\n\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n          <Text bold>Stake amount</Text>\r\n          {/* <Flex alignItems=\"center\">\r\n            <Image\r\n              src={`/images/tokens/${getAddress(stakingToken.address)}.png`}\r\n              width={24}\r\n              height={24}\r\n              alt={stakingToken.symbol}\r\n            />\r\n            <Text ml=\"4px\" bold>\r\n              {stakingToken.symbol}\r\n            </Text>\r\n          </Flex> */}\r\n        </Flex>\r\n        <ModalInput\r\n          value={stakeAmount}\r\n          onSelectMax={() => {\r\n            handleChangePercent(100)\r\n          }}\r\n          onChange={(e) => handleStakeInputChange(e.currentTarget.value)}\r\n          max={getFullDisplayBalance(new BigNumber(userLimit), stakingToken.decimals, 0)}\r\n          symbol={stakingToken.symbol}\r\n          addLiquidityUrl=\"\"\r\n        />\r\n\r\n        {/* Fetch and display actual balance */}\r\n\r\n        <Text color=\"textSubtle\" fontSize=\"14px\" mb=\"8px\" style={{ textAlign: 'left' }}>\r\n          Remaining stakable amount: {remainingStakeTokens} {pool.stakingToken.symbol}\r\n        </Text>\r\n\r\n        <div>\r\n          <Text ml=\"auto\" color=\"textSubtle\" fontSize=\"14px\" mb=\"8px\" style={{ textAlign: 'left' }}>\r\n            {/* {t('Balance: %balance%', {\r\n            balance: getFullDisplayBalance(getCalculatedStakingLimit(), stakingToken.decimals),\r\n          })} */}\r\n            Balance: {totalStakingTokens.toFixed(4)} {pool.stakingToken.symbol}\r\n          </Text>\r\n        </div>\r\n\r\n        {/* {hasReachedStakeLimit && (\r\n          <Text color=\"failure\" fontSize=\"12px\" style={{ textAlign: 'right' }} mt=\"4px\">\r\n            {t('Maximum total stake: %amount% %token%', {\r\n              amount: getFullDisplayBalance(new BigNumber(stakingLimit), stakingToken.decimals, 0),\r\n              token: stakingToken.symbol,\r\n            })}\r\n          </Text>\r\n        )} */}\r\n        {/* <Flex>\r\n        <Text ml=\"auto\" color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\" mt=\"-8px\" style={{ textAlign: 'left'}}>\r\n          {t('Balance: %balance%', {\r\n            balance: getFullDisplayBalance(getCalculatedStakingLimit(), stakingToken.decimals),\r\n          })}\r\n        </Text>\r\n        </Flex> */}\r\n        {/* <Slider\r\n          min={0}\r\n          max={100}\r\n          value={percent}\r\n          onValueChanged={handleChangePercent}\r\n          name=\"stake\"\r\n          valueLabel={`${percent}%`}\r\n          step={1}\r\n        />\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mt=\"8px\">\r\n          <PercentageButton onClick={() => handleChangePercent(25)}>25%</PercentageButton>\r\n          <PercentageButton onClick={() => handleChangePercent(50)}>50%</PercentageButton>\r\n          <PercentageButton onClick={() => handleChangePercent(75)}>75%</PercentageButton>\r\n          <PercentageButton onClick={() => handleChangePercent(100)}>{t('Max')}</PercentageButton>\r\n        </Flex> */}\r\n\r\n        <Flex justifyContent=\"space-between\" marginTop=\"17px\" marginBottom=\"17px\">\r\n          <Text bold>Approved Tokens</Text>\r\n          <Text>\r\n            {getBalanceNumber(totalAllowance.balance, stakingToken.decimals)} {pool.stakingToken.symbol}\r\n          </Text>\r\n        </Flex>\r\n        <Flex style={{ width: '100%' }}>\r\n          <Button\r\n            isLoading={pendingTx}\r\n            // endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n            endIcon={requestedApproval ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n            // onClick={handleApproveClick}\r\n            // disabled={!stakeAmount || parseFloat(stakeAmount) === 0 || hasReachedStakeLimit || approvedTx}\r\n            onClick={handleApprove}\r\n            disabled={!stakeAmount || isApproved}\r\n            mt=\"24px\"\r\n            fullWidth\r\n            marginRight=\"20px\"\r\n          >\r\n            Approve\r\n          </Button>\r\n          <Button\r\n            isLoading={pendingTx}\r\n            endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n            onClick={handleConfirmClick}\r\n            disabled={!stakeAmount || hasReachedStakeLimit || !isApproved}\r\n            // disabled={!approvedTx}\r\n            mt=\"24px\"\r\n            fullWidth\r\n            marginLeft=\"20px\"\r\n          >\r\n            {/* {pendingTx ? t('Depositing') : t('Deposit')} */}\r\n            {t('Deposit')}\r\n          </Button>\r\n        </Flex>\r\n        {/* {!isRemovingStake && (\r\n          <StyledLink external href={BASE_EXCHANGE_URL}>\r\n            <Button fullWidth mt=\"8px\" variant=\"secondary\">\r\n              {t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n            </Button>\r\n          </StyledLink>\r\n        )} */}\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default StakeActionModal\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Button, Dropdown, Flex, Link, Modal, Text, useModal } from '@metagg/mgg-uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useSousUnstake } from 'hooks/useUnstake'\r\nimport { ChevronDown, ChevronUp } from 'react-feather'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useToast from 'hooks/useToast'\r\nimport { useSousHarvest } from 'hooks/useHarvest'\r\nimport BigNumber from 'bignumber.js'\r\nimport { formatNumber, getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport { Pool } from 'state/types'\r\n\r\nimport StakeTokenModal from './Stake'\r\nimport { getAddress } from '../../../../../utils/addressHelpers'\r\nimport { BASE_SWAP_URL } from '../../../../../config'\r\n\r\ninterface StakeModalProps {\r\n  isBnbPool: boolean\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n  stakingTokenPrice: number\r\n  isRemovingStake?: boolean\r\n  onDismiss?: () => void\r\n  addTokenUrl?: string\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  width: 100%;\r\n`\r\nconst StyledFlex = styled(Flex)`\r\n  justify-content: center;\r\n\r\n  & > * {\r\n    flex: 1;\r\n    margin: 0px 10px;\r\n  }\r\n`\r\n\r\nconst StakeModal: React.FC<StakeModalProps> = ({\r\n  isBnbPool,\r\n  pool,\r\n  stakingTokenBalance,\r\n  stakingTokenPrice,\r\n  addTokenUrl,\r\n  isRemovingStake = false,\r\n  onDismiss,\r\n}) => {\r\n  const { sousId, stakingToken, userData, isAddTokenDisabled, earningToken } = pool\r\n  const { chainId } = useWeb3React()\r\n  const { onReward } = useSousHarvest(sousId, isBnbPool)\r\n  const { onUnstake } = useSousUnstake(sousId, false)\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const [activeSelect, setActiveSelect] = useState(false)\r\n  const { balance: earnedTokenBalance } = useTokenBalance(getAddress(pool.earningToken.address))\r\n  const { toastSuccess, toastError } = useToast()\r\n  const totalStakingTokens = userData?.stakingTokenBalance\r\n    ? getBalanceNumber(new BigNumber(userData.stakingTokenBalance), stakingToken.decimals)\r\n    : 0\r\n  const totalStakedTokens = userData?.stakedBalance\r\n    ? getBalanceNumber(new BigNumber(userData.stakedBalance), stakingToken.decimals)\r\n    : 0\r\n  const totalEarningTokens = earnedTokenBalance ? getBalanceNumber(new BigNumber(earnedTokenBalance)) : 0\r\n  const totalEarnedTokens = userData?.pendingReward ? getBalanceNumber(new BigNumber(userData.pendingReward)) : 0\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const temp = new BigNumber(pool.tokenPerBlock).times(new BigNumber(userData.stakedBalance).div(pool.totalStaked))\r\n  const rewardRate = pool?.tokenPerBlock ? getBalanceNumber(temp) : 0\r\n  const [onPresentStakeAction] = useModal(\r\n    <StakeTokenModal\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n    />,\r\n  )\r\n\r\n  const handleHarvestConfirm = async () => {\r\n    setPendingTx(true)\r\n    // harvesting\r\n    try {\r\n      await onReward()\r\n      toastSuccess(\r\n        `${t('Claimed')}!`,\r\n        t('Your %symbol% earnings have been sent to your wallet!', { symbol: earningToken.symbol }),\r\n      )\r\n      setPendingTx(false)\r\n      onDismiss()\r\n    } catch (e) {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      console.error(e)\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  const handleUnstake = async () => {\r\n    setPendingTx(true)\r\n    // unstaking\r\n    try {\r\n      await onUnstake(\r\n        getFullDisplayBalance(new BigNumber(userData.stakedBalance), stakingToken.decimals, 18),\r\n        stakingToken.decimals,\r\n      )\r\n      toastSuccess(\r\n        `${t('Unstaked')}!`,\r\n        t('Your %symbol% earnings have also been claimed to your wallet!', {\r\n          symbol: earningToken.symbol,\r\n        }),\r\n      )\r\n      setPendingTx(false)\r\n      onDismiss()\r\n    } catch (e) {\r\n      toastError(t('Canceled'), t('Please try again and confirm the transaction.'))\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal title=\"\" onDismiss={onDismiss}>\r\n      <Flex flexDirection=\"column\" style={{ marginTop: '-50px', width: '550px' }}>\r\n        <Text fontSize=\"20px\" marginBottom=\"10px\" marginLeft=\"10px\">\r\n          Account Info\r\n        </Text>\r\n        <Text fontSize=\"15px\" marginLeft=\"10px\">\r\n          Staking, balances & earnings\r\n        </Text>\r\n\r\n        {/* Remove extra add liquidity button component when staking token symbol is equal to earning token symbol */}\r\n        <StyledFlex marginTop=\"21px\">\r\n          <Flex flexDirection=\"column\">\r\n            <Text fontSize=\"24px\">{formatNumber(totalStakingTokens, 2, 5)}</Text>\r\n            <Text color=\"textSubtle\" marginBottom=\"24px\">\r\n              {pool.stakingToken.symbol} Tokens\r\n            </Text>\r\n            <Button\r\n              disabled={isAddTokenDisabled}\r\n              fullWidth\r\n              className=\"disabled\"\r\n              onClick={() => {\r\n                window.open(`${BASE_SWAP_URL}/${pool.stakingToken.address[chainId]}`, '_blank')\r\n              }}\r\n            >\r\n              Add More\r\n            </Button>\r\n          </Flex>\r\n          {pool.stakingToken.symbol !== pool.earningToken.symbol && (\r\n            <Flex flexDirection=\"column\">\r\n              <Text fontSize=\"24px\">{formatNumber(totalEarningTokens, 2, 5)}</Text>\r\n              <Text color=\"textSubtle\" marginBottom=\"24px\">\r\n                {pool.earningToken.symbol} Tokens\r\n              </Text>\r\n              <Button\r\n                fullWidth\r\n                onClick={() => {\r\n                  window.open(`${BASE_SWAP_URL}/${pool.earningToken.address[chainId]}`, '_blank')\r\n                }}\r\n              >\r\n                Add More\r\n              </Button>\r\n            </Flex>\r\n          )}\r\n          <Flex flexDirection=\"column\">\r\n            <Text fontSize=\"24px\">{formatNumber(totalStakedTokens, 2, 5)}</Text>\r\n            <Text color=\"textSubtle\" marginBottom=\"24px\">\r\n              {pool.stakingToken.symbol} Staked\r\n            </Text>\r\n            <Button fullWidth onClick={onPresentStakeAction} disabled={pool.isDepositDisabled}>\r\n              Stake Tokens\r\n            </Button>\r\n          </Flex>\r\n        </StyledFlex>\r\n\r\n        <StyledFlex>\r\n          <hr style={{ marginTop: '30px', border: 'none', borderTop: `2px solid ${theme.colors.primary}` }} />\r\n        </StyledFlex>\r\n        <StyledFlex marginTop=\"30px\" marginBottom=\"20px\">\r\n          <Flex flexDirection=\"column\">\r\n            <Text fontSize=\"24px\">{formatNumber(rewardRate, 2, 10)}</Text>\r\n            <Text color=\"textSubtle\" fontSize=\"17px\">\r\n              Your Rate {pool.earningToken.symbol}/block\r\n            </Text>\r\n          </Flex>\r\n          <Flex flexDirection=\"column\">\r\n            <Text fontSize=\"24px\">{formatNumber(totalEarnedTokens, 2, 5)}</Text>\r\n            <Text color=\"textSubtle\" fontSize=\"17px\">\r\n              {pool.earningToken.symbol} Token Earnings\r\n            </Text>\r\n          </Flex>\r\n          <Flex\r\n            flexDirection=\"column\"\r\n            mb=\"16px\"\r\n            marginLeft=\"5px\"\r\n            onMouseEnter={() => setActiveSelect(true)}\r\n            onMouseLeave={() => setActiveSelect(false)}\r\n          >\r\n            {userData.stakedBalance.eq(0) ? (\r\n              <Button disabled fullWidth>\r\n                {' '}\r\n                Withdraw{' '}\r\n              </Button>\r\n            ) : (\r\n              <Dropdown\r\n                position=\"top\"\r\n                target={\r\n                  // Disable component if total staked tokens is empty\r\n                  <Button fullWidth variant=\"secondary\" disabled={pool.isWithdrawDisabled}>\r\n                    <Text>Withdraw</Text> {activeSelect ? <ChevronDown /> : <ChevronUp />}\r\n                  </Button>\r\n                }\r\n              >\r\n                {/* Disable Claim & Withdraw if no staked tokens */}\r\n                <Button type=\"button\" disabled={pool.isWithdrawDisabled} fullWidth onClick={handleHarvestConfirm}>\r\n                  Claim\r\n                </Button>\r\n                <Button type=\"button\" disabled={pool.isWithdrawDisabled} onClick={handleUnstake}>\r\n                  Claim & Withdraw\r\n                </Button>\r\n              </Dropdown>\r\n            )}\r\n          </Flex>\r\n        </StyledFlex>\r\n        {!!pool.isWithdrawDisabled && (\r\n          <Text className=\"yellow\" fontSize=\"15px\" marginLeft=\"10px\">\r\n            MGG Withdrawals and Deposits are locked for 48 hours during launchpad\r\n          </Text>\r\n        )}\r\n      </Flex>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default StakeModal\r\n","import React from 'react'\r\nimport { IconButton, AddIcon, MinusIcon, Skeleton, useTooltip } from '@pancakeswap/uikit'\r\nimport { Button, Text, Flex, useModal } from '@metagg/mgg-uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { Pool } from 'state/types'\r\nimport Balance from 'components/Balance'\r\nimport NotEnoughTokensModal from '../Modals/NotEnoughTokensModal'\r\nimport StakeModal from '../Modals/StakeModal'\r\n\r\ninterface StakeActionsProps {\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n  stakedBalance: BigNumber\r\n  isBnbPool: boolean\r\n  isStaked: ConstrainBoolean\r\n  isLoading?: boolean\r\n}\r\n\r\nconst StakeAction: React.FC<StakeActionsProps> = ({\r\n  pool,\r\n  stakingTokenBalance,\r\n  stakedBalance,\r\n  isBnbPool,\r\n  isStaked,\r\n  isLoading = false,\r\n}) => {\r\n  const { stakingToken, stakingTokenPrice, stakingLimit, isFinished, userData } = pool\r\n  const { t } = useTranslation()\r\n  const stakedTokenBalance = getBalanceNumber(stakedBalance, stakingToken.decimals)\r\n  const stakedTokenDollarBalance = getBalanceNumber(\r\n    stakedBalance.multipliedBy(stakingTokenPrice),\r\n    stakingToken.decimals,\r\n  )\r\n\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n\r\n  const [onPresentStake] = useModal(\r\n    <StakeModal\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n    />,\r\n  )\r\n\r\n  const [onPresentUnstake] = useModal(\r\n    <StakeModal\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n      isRemovingStake\r\n    />,\r\n  )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('You’ve already staked the maximum amount you can stake in this pool!'),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const reachStakingLimit = stakingLimit.gt(0) && userData.stakedBalance.gte(stakingLimit)\r\n\r\n  const renderStakeAction = () => {\r\n    // isStaked ? (\r\n    //   <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n    //     <Flex flexDirection=\"column\">\r\n    //       <>\r\n    //         <Balance bold fontSize=\"20px\" decimals={3} value={stakedTokenBalance} />\r\n    //         {stakingTokenPrice !== 0 && (\r\n    //           <Text fontSize=\"12px\" color=\"textSubtle\">\r\n    //             <Balance\r\n    //               fontSize=\"12px\"\r\n    //               color=\"textSubtle\"\r\n    //               decimals={2}\r\n    //               value={stakedTokenDollarBalance}\r\n    //               prefix=\"~\"\r\n    //               unit=\" USD\"\r\n    //             />\r\n    //           </Text>\r\n    //         )}\r\n    //       </>\r\n    //     </Flex>\r\n    //     <Flex>\r\n    //       <IconButton variant=\"secondary\" onClick={onPresentUnstake} mr=\"6px\">\r\n    //         <MinusIcon color=\"primary\" width=\"24px\" />\r\n    //       </IconButton>\r\n    //       {reachStakingLimit ? (\r\n    //         <span ref={targetRef}>\r\n    //           <IconButton variant=\"secondary\" disabled>\r\n    //             <AddIcon color=\"textDisabled\" width=\"24px\" height=\"24px\" />\r\n    //           </IconButton>\r\n    //         </span>\r\n    //       ) : (\r\n    //         <IconButton\r\n    //           variant=\"secondary\"\r\n    //           onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired}\r\n    //           disabled={isFinished}\r\n    //         >\r\n    //           <AddIcon color=\"primary\" width=\"24px\" height=\"24px\" />\r\n    //         </IconButton>\r\n    //       )}\r\n    //     </Flex>\r\n    //     {tooltipVisible && tooltip}\r\n    //   </Flex>\r\n    // ) :\r\n\r\n    // Reserve function for future use\r\n    // <Button disabled={isFinished} onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired} fullWidth>\r\n    return (\r\n      <Button fullWidth disabled={isFinished && stakedBalance.isEqualTo(0)} onClick={onPresentStake}>\r\n        {isFinished && stakedBalance.isGreaterThan(0) ? 'Withdraw' : 'Stake'}\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      {isLoading ? <Skeleton width=\"100%\" height=\"52px\" /> : renderStakeAction()}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default StakeAction\r\n","import BigNumber from 'bignumber.js'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { Flex, Text, Box } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { PoolCategory } from 'config/constants/types'\r\nimport { Pool } from 'state/types'\r\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\r\nimport ApprovalAction from './ApprovalAction'\r\nimport StakeActions from './StakeActions'\r\nimport HarvestActions from './HarvestActions'\r\n\r\nconst InlineText = styled(Text)`\r\n  display: inline;\r\n`\r\n\r\nconst StyledFlex = styled(Flex)`\r\n  & > * {\r\n    flex: 1;\r\n    height: 60px;\r\n  }\r\n`\r\n\r\ninterface CardActionsProps {\r\n  pool: Pool\r\n  stakedBalance: BigNumber\r\n}\r\n\r\nconst CardActions: React.FC<CardActionsProps> = ({ pool, stakedBalance }) => {\r\n  const { sousId, stakingToken, earningToken, harvest, poolCategory, userData, earningTokenPrice, isComingSoon } = pool\r\n  // getBalanceNumber(stakedBalance, stakingToken.decimals)\r\n  // Pools using native BNB behave differently than pools using a token\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n  const { t } = useTranslation()\r\n  const allowance = userData?.allowance ? new BigNumber(userData.allowance) : BIG_ZERO\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n  const earnings = userData?.pendingReward ? new BigNumber(userData.pendingReward) : BIG_ZERO\r\n  const needsApproval = !allowance.gt(0) && !isBnbPool\r\n  const isStaked = stakedBalance.gt(0)\r\n  const isLoading = !userData\r\n\r\n  const totalStaked = userData?.stakedBalance\r\n    ? getBalanceNumber(new BigNumber(userData.stakedBalance), stakingToken.decimals)\r\n    : 0\r\n  const totalEarned = userData?.pendingReward ? getBalanceNumber(new BigNumber(userData.pendingReward)) : 0\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      <Flex flexDirection=\"column\">\r\n        {harvest && (\r\n          <>\r\n            {/* <Flex justifyContent=\"space-between\">\r\n              <Box display=\"inline\">\r\n                <Text color=\"text\" textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n                <Text color=\"text\" bold fontSize=\"15px\" marginBottom=\"8px\">\r\n                  {`${stakingToken.symbol} Staked`}\r\n                </Text>\r\n              </Box>\r\n              <Box display=\"inline\">\r\n                <Text color=\"text\" textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n                <Text color=\"text\" bold fontSize=\"15px\" marginBottom=\"8px\">\r\n                  {`${earningToken.symbol} Earned`}\r\n                </Text>\r\n              </Box>\r\n            </Flex> */}\r\n            <Flex justifyContent=\"space-between\" marginBottom=\"20px\">\r\n              <Box display=\"inline\">\r\n                {/* <Text color=\"text\" textTransform=\"uppercase\"  bold fontSize=\"12px\"> */}\r\n                <Text color=\"text\" textTransform=\"uppercase\" fontSize=\"12px\">\r\n                  {!isComingSoon && formatNumber(totalStaked, 2, 5)} {isComingSoon && '-'} {stakingToken.symbol}\r\n                </Text>\r\n              </Box>\r\n              <Box display=\"inline\">\r\n                {/* <Text color=\"text\" textTransform=\"uppercase\" bold fontSize=\"12px\"> */}\r\n                <Text color=\"text\" textTransform=\"uppercase\" fontSize=\"12px\">\r\n                  {!isComingSoon && formatNumber(totalEarned, 2, 5)} {isComingSoon && '-'} {earningToken.symbol}\r\n                </Text>\r\n              </Box>\r\n            </Flex>\r\n          </>\r\n        )}\r\n        {/* <Box display=\"inline\">\r\n          <InlineText color={isStaked ? 'secondary' : 'textSubtle'} textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n            {isStaked ? stakingToken.symbol : t('Stake')}{' '}\r\n          </InlineText>\r\n          <InlineText color={isStaked ? 'textSubtle' : 'secondary'} textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n            {isStaked ? t('Staked') : `${stakingToken.symbol}`}\r\n          </InlineText>\r\n        </Box> */}\r\n        <StyledFlex justifyContent=\"space-between\" marginTop=\"10px\">\r\n          <StakeActions\r\n            isLoading={isLoading}\r\n            pool={pool}\r\n            stakingTokenBalance={stakingTokenBalance}\r\n            stakedBalance={stakedBalance}\r\n            isBnbPool={isBnbPool}\r\n            isStaked={isStaked}\r\n          />\r\n          {/* <HarvestActions\r\n              earnings={earnings}\r\n              earningToken={earningToken}\r\n              sousId={sousId}\r\n              earningTokenPrice={earningTokenPrice}\r\n              isBnbPool={isBnbPool}\r\n              isLoading={isLoading}\r\n            /> */}\r\n        </StyledFlex>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default CardActions\r\n","import React, { useContext, useState } from 'react'\r\nimport { Flex, Text, Button } from '@metagg/mgg-uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Pool } from 'state/types'\r\nimport useToast from 'hooks/useToast'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useSousHarvest } from 'hooks/useHarvest'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { formatNumber, getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport Balance from 'components/Balance'\r\nimport {\r\n  ActionContainer,\r\n  ActionContent,\r\n  ActionTitles,\r\n  Earned,\r\n} from '../../../Farms/components/FarmTable/Actions/styles'\r\n\r\ninterface StakeActionsProps {\r\n  isBnbPool: boolean\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n  stakingTokenPrice: number\r\n  addTokenUrl?: string\r\n}\r\n\r\nconst ClaimAction: React.FC<StakeActionsProps> = ({\r\n  isBnbPool,\r\n  pool,\r\n  stakingTokenBalance,\r\n  stakingTokenPrice,\r\n  addTokenUrl,\r\n}) => {\r\n  const { sousId, stakingToken, userData, isAddTokenDisabled, earningToken } = pool\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const theme = useContext(ThemeContext)\r\n  const { t } = useTranslation()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const { onReward } = useSousHarvest(sousId, isBnbPool)\r\n  const totalEarnedTokens = userData?.pendingReward ? getBalanceNumber(new BigNumber(userData.pendingReward)) : 0\r\n  const handleHarvestConfirm = async () => {\r\n    setPendingTx(true)\r\n    // harvesting\r\n    try {\r\n      await onReward()\r\n      toastSuccess(\r\n        `Claimed!`,\r\n        t('Your %symbol% earnings have been sent to your wallet!', { symbol: earningToken.symbol }),\r\n      )\r\n      setPendingTx(false)\r\n    } catch (e) {\r\n      toastError('Error, Please try again. Confirm the transaction and make sure you are paying enough gas!')\r\n      console.error(e)\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ActionContainer style={{ margin: '10px 0' }}>\r\n      <ActionTitles>\r\n        <Text bold textTransform=\"uppercase\" color={theme.colors.MGG_accent2} fontSize=\"12px\" pr=\"4px\">\r\n          {earningToken.symbol}\r\n        </Text>\r\n        <Text bold textTransform=\"uppercase\" color=\"textSubtle\" fontSize=\"12px\">\r\n          Earned\r\n        </Text>\r\n      </ActionTitles>\r\n      <ActionContent>\r\n        <div>\r\n          <Earned>{formatNumber(totalEarnedTokens, 2, 5)}</Earned>\r\n        </div>\r\n        <Button\r\n          disabled={userData.stakedBalance.eq(0)}\r\n          onClick={handleHarvestConfirm}\r\n          style={{ borderRadius: '3px', height: '40px' }}\r\n          ml=\"4px\"\r\n        >\r\n          Claim\r\n        </Button>\r\n      </ActionContent>\r\n    </ActionContainer>\r\n  )\r\n}\r\n\r\nexport default ClaimAction\r\n","import BigNumber from 'bignumber.js'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { CardBody, Flex, Text, Link, LinkExternal } from '@sparkpointio/sparkswap-uikit'\r\nimport { ThemeContext } from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport { PoolCategory } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { usePoolPrice } from 'hooks/price'\r\nimport usePrevious from 'hooks/refHelpers'\r\nimport { getPoolApr } from 'utils/apr'\r\nimport { getBscScanAddressUrl, getEthScanAddressUrl } from 'utils/bscscan'\r\nimport { Pool } from 'state/types'\r\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\r\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport { getBscScanLink, getEthScanLink } from 'utils'\r\nimport DetailsSection from 'views/Farms/components/FarmCard/DetailsSection'\r\nimport { StyledCard, StyledCardInner } from './StyledCard'\r\nimport CardFooter from './CardFooter'\r\nimport StyledCardHeader from './StyledCardHeader'\r\nimport CardActions from './CardActions'\r\nimport { getAddress } from '../../../../utils/addressHelpers'\r\nimport ClaimAction from '../ClaimAction'\r\n\r\nconst PoolCard: React.FC<{ pool: Pool; account: string }> = ({ pool, account }) => {\r\n  const {\r\n    sousId,\r\n    stakingToken,\r\n    earningToken,\r\n    isFinished,\r\n    userData,\r\n    startBlock,\r\n    endBlock,\r\n    isComingSoon,\r\n    stakingTokenPrice,\r\n    poolCategory,\r\n  } = pool\r\n  const { t } = useTranslation()\r\n  const { chainId } = useWeb3React()\r\n  const stakedBalance = userData?.stakedBalance ? new BigNumber(userData.stakedBalance) : BIG_ZERO\r\n  const accountHasStakedBalance = stakedBalance.gt(0)\r\n  const theme = useContext(ThemeContext)\r\n  const totalStaked = pool.totalStaked\r\n    ? getBalanceNumber(new BigNumber(pool.totalStaked.toString()), stakingToken.decimals)\r\n    : 0\r\n\r\n  const rewardPerBlock = pool?.tokenPerBlock\r\n    ? getBalanceNumber(new BigNumber(pool.tokenPerBlock.toString()), earningToken.decimals)\r\n    : 0\r\n\r\n  const temp = new BigNumber(pool.tokenPerBlock).times(new BigNumber(userData.stakedBalance).div(pool.totalStaked))\r\n  const rewardRate = pool?.tokenPerBlock ? getBalanceNumber(temp) : 0\r\n\r\n  const { currentBlock } = useBlock()\r\n\r\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\r\n    getPoolBlockInfo(pool, currentBlock)\r\n  const stakingAddress = getAddress(pool.contractAddress)\r\n\r\n  // const [ isFetchData, setFetchData ] = useState<boolean | null>(true)\r\n  // const { stakingPrice, rewardPrice } = usePoolPrice(getAddress(stakingToken.address), getAddress(earningToken.address), isFetchData)\r\n  // const prevStakingPrice = usePrevious(stakingPrice);\r\n  // const prevRewardPrice = usePrevious(rewardPrice)\r\n\r\n  // useEffect(() => {\r\n  //   if ((stakingPrice > 0) || (rewardPrice > 0)) {\r\n  //     setFetchData(false);\r\n  //   }   \r\n  //   setTimeout(() => {\r\n  //     setFetchData(true);\r\n  //     if ((stakingPrice !== prevStakingPrice) || (rewardPrice !== prevRewardPrice)) {\r\n  //       setFetchData(true);\r\n  //     } else {\r\n  //       setFetchData(false);\r\n  //     }\r\n  //   }, 60000);\r\n  //   if ((prevStakingPrice === stakingPrice) || (prevRewardPrice === rewardPrice)) {\r\n  //     setFetchData(false);\r\n  //   }   \r\n  // }, [stakingPrice, rewardPrice, setFetchData, prevStakingPrice, prevRewardPrice])\r\n\r\n  const rate = rewardRate ? formatNumber(rewardRate, 2, 10) : '-'\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n  // const apr = getPoolApr(stakingPrice, rewardPrice, totalStaked, rewardPerBlock)\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n  const isLoading = !userData\r\n  return (\r\n    <StyledCard isFinished={isFinished && sousId !== 0}>\r\n      <StyledCardHeader\r\n        isStaking={accountHasStakedBalance}\r\n        earningToken={earningToken}\r\n        stakingToken={stakingToken}\r\n        isFinished={isFinished && sousId !== 0}\r\n      />\r\n      <Flex style={{ margin: '24px' }} flexDirection=\"column\" justifyContent=\"space-evenly\">\r\n        <Flex>\r\n          <ClaimAction\r\n            stakingTokenBalance={stakingTokenBalance}\r\n            isBnbPool={isBnbPool}\r\n            pool={pool}\r\n            stakingTokenPrice={stakingTokenPrice}\r\n          />\r\n        </Flex>\r\n        <Flex justifyContent=\"space-between\" style={{ textAlign: 'left' }}>\r\n          <Text>Duration</Text>\r\n          <Link\r\n            external\r\n            href={\r\n              chainId === 56 || chainId === 97\r\n                ? getBscScanLink(hasPoolStarted ? endBlock : startBlock, 'countdown')\r\n                : getEthScanLink(hasPoolStarted ? endBlock : startBlock, 'countdown')\r\n            }\r\n          >\r\n            <Text color=\"textSubtle\">\r\n              {!isComingSoon && `${formatNumber(blocksRemaining, 0, 0)}`} {isComingSoon && '-'} blocks\r\n            </Text>\r\n          </Link>\r\n        </Flex>\r\n\r\n        {/* <AprRow pool={pool} stakingTokenPrice={stakingTokenPrice} /> */}\r\n        {/* <Flex justifyContent=\"space-between\" style={{textAlign: 'left'}}>\r\n            <Text>Total Deposit</Text>\r\n            <Text>{!isComingSoon && `${ formatNumber(totalStaked) }`} {isComingSoon && '-'} {stakingToken.symbol}</Text>\r\n          </Flex> */}\r\n        {/* <Flex justifyContent=\"space-between\" style={{textAlign: 'left'}}>\r\n              <Text>Reward per block</Text>\r\n              <Text>{!isComingSoon && rewardPerBlock} {isComingSoon && '-'}</Text>\r\n          </Flex> */}\r\n        <Flex justifyContent=\"space-between\" style={{ textAlign: 'left' }}>\r\n          <Text>{t('Rate')}</Text>\r\n          <Text>\r\n            {!isComingSoon ? rate : '-'} {pool.earningToken.symbol}/block\r\n          </Text>\r\n        </Flex>\r\n        <Flex mt=\"24px\" flexDirection=\"column\" marginTop=\"10px\">\r\n          {account ? (\r\n            <CardActions pool={pool} stakedBalance={stakedBalance} />\r\n          ) : (\r\n            <>\r\n              <UnlockButton />\r\n            </>\r\n          )}\r\n        </Flex>\r\n        {/* <Text color=\"textSubtle\" fontSize=\"14px\">{t('This will only work on Binance Smart Chain')}</Text> */}\r\n        {/* <CardFooter pool={pool} account={account} /> */}\r\n        <DetailsSection\r\n          stakingAddress={\r\n            chainId === 56 || chainId === 97\r\n              ? getBscScanAddressUrl(stakingAddress)\r\n              : getEthScanAddressUrl(stakingAddress)\r\n          }\r\n        />\r\n      </Flex>\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default PoolCard\r\n","import { useEffect, useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useAppDispatch } from 'state'\r\nimport { setBlock } from '.'\r\nimport { State } from '../types'\r\n\r\nexport const useBlock = () => {\r\n  return useSelector((state: State) => state.block)\r\n}\r\n\r\nexport const useInitialBlock = () => {\r\n  return useSelector((state: State) => state.block.initialBlock)\r\n}\r\n","import React from 'react'\r\nimport { Flex, TooltipText, IconButton, useModal, CalculateIcon, Skeleton, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Balance from 'components/Balance'\r\nimport ApyCalculatorModal from 'components/ApyCalculatorModal'\r\nimport { Pool } from 'state/types'\r\nimport { BASE_EXCHANGE_URL } from 'config'\r\nimport { getAprData } from 'views/Pools/helpers'\r\n\r\ninterface AprRowProps {\r\n  pool: Pool\r\n  performanceFee?: number\r\n}\r\n\r\nconst AprRow: React.FC<AprRowProps> = ({ pool, performanceFee = 0 }) => {\r\n  const { t } = useTranslation()\r\n  const { stakingToken, earningToken, isFinished, apr, earningTokenPrice, isAutoVault } = pool\r\n\r\n  const tooltipContent = isAutoVault\r\n    ? t('APY includes compounding, APR doesn’t. This pool’s CAKE is compounded automatically, so we show APY.')\r\n    : t('This pool’s rewards aren’t compounded automatically, so we show APR')\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(tooltipContent, { placement: 'bottom-start' })\r\n\r\n  const { apr: earningsPercentageToDisplay, roundingDecimals, compoundFrequency } = getAprData(pool, performanceFee)\r\n\r\n  const apyModalLink =\r\n    stakingToken.address &&\r\n    `${BASE_EXCHANGE_URL}/#/swap?outputCurrency=${stakingToken.address[process.env.REACT_APP_CHAIN_ID]}`\r\n\r\n  const [onPresentApyModal] = useModal(\r\n    <ApyCalculatorModal\r\n      tokenPrice={earningTokenPrice}\r\n      apr={apr}\r\n      linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n      linkHref={apyModalLink || BASE_EXCHANGE_URL}\r\n      earningTokenSymbol={earningToken.symbol}\r\n      roundingDecimals={roundingDecimals}\r\n      compoundFrequency={compoundFrequency}\r\n      performanceFee={performanceFee}\r\n    />,\r\n  )\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef}>{isAutoVault ? `${t('APY')}:` : `${t('APR')}:`}</TooltipText>\r\n      {isFinished || !apr ? (\r\n        <Skeleton width=\"82px\" height=\"32px\" />\r\n      ) : (\r\n        <Flex alignItems=\"center\">\r\n          <Balance\r\n            fontSize=\"16px\"\r\n            isDisabled={isFinished}\r\n            value={earningsPercentageToDisplay}\r\n            decimals={2}\r\n            unit=\"%\"\r\n            bold\r\n          />\r\n          <IconButton onClick={onPresentApyModal} variant=\"text\" scale=\"sm\">\r\n            <CalculateIcon color=\"textSubtle\" width=\"18px\" />\r\n          </IconButton>\r\n        </Flex>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default AprRow\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled from 'styled-components'\r\nimport { getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport {\r\n  Flex,\r\n  MetamaskIcon,\r\n  Text,\r\n  TooltipText,\r\n  LinkExternal,\r\n  TimerIcon,\r\n  Skeleton,\r\n  useTooltip,\r\n  Button,\r\n  Link,\r\n  HelpIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config'\r\nimport { useBlock, useCakeVault } from 'state/hooks'\r\nimport { Pool } from 'state/types'\r\nimport { getAddress, getCakeVaultAddress } from 'utils/addressHelpers'\r\nimport { registerToken } from 'utils/wallet'\r\nimport { getBscScanBlockCountdownUrl } from 'utils/bscscan'\r\nimport Balance from 'components/Balance'\r\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\r\n\r\ninterface ExpandedFooterProps {\r\n  pool: Pool\r\n  account: string\r\n}\r\n\r\nconst ExpandedWrapper = styled(Flex)`\r\n  svg {\r\n    height: 14px;\r\n    width: 14px;\r\n  }\r\n`\r\n\r\nconst ExpandedFooter: React.FC<ExpandedFooterProps> = ({ pool, account }) => {\r\n  const { t } = useTranslation()\r\n  const { currentBlock } = useBlock()\r\n  const {\r\n    totalCakeInVault,\r\n    fees: { performanceFee },\r\n  } = useCakeVault()\r\n\r\n  const {\r\n    stakingToken,\r\n    earningToken,\r\n    totalStaked,\r\n    startBlock,\r\n    endBlock,\r\n    stakingLimit,\r\n    contractAddress,\r\n    sousId,\r\n    isAutoVault,\r\n  } = pool\r\n\r\n  const tokenAddress = earningToken.address ? getAddress(earningToken.address) : ''\r\n  const poolContractAddress = getAddress(contractAddress)\r\n  const cakeVaultContractAddress = getCakeVaultAddress()\r\n  const imageSrc = `${BASE_URL}/images/tokens/${tokenAddress}.png`\r\n  const isMetaMaskInScope = !!(window as WindowChain).ethereum?.isMetaMask\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\r\n    getPoolBlockInfo(pool, currentBlock)\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('Subtracted automatically from each yield harvest and burned.'),\r\n    { placement: 'bottom-start' },\r\n  )\r\n\r\n  const getTotalStakedBalance = () => {\r\n    if (isAutoVault) {\r\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals)\r\n    }\r\n    if (isManualCakePool) {\r\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(totalCakeInVault)\r\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals)\r\n    }\r\n    return getBalanceNumber(totalStaked, stakingToken.decimals)\r\n  }\r\n\r\n  const {\r\n    targetRef: totalStakedTargetRef,\r\n    tooltip: totalStakedTooltip,\r\n    tooltipVisible: totalStakedTooltipVisible,\r\n  } = useTooltip(t('Total amount of %symbol% staked in this pool', { symbol: stakingToken.symbol }), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  return (\r\n    <ExpandedWrapper flexDirection=\"column\">\r\n      <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Text small>{t('Total staked')}:</Text>\r\n        <Flex alignItems=\"flex-start\">\r\n          {totalStaked && totalStaked.gte(0) ? (\r\n            <>\r\n              <Balance small value={getTotalStakedBalance()} decimals={0} unit={` ${stakingToken.symbol}`} />\r\n              <span ref={totalStakedTargetRef}>\r\n                <HelpIcon color=\"textSubtle\" width=\"20px\" ml=\"6px\" mt=\"4px\" />\r\n              </span>\r\n            </>\r\n          ) : (\r\n            <Skeleton width=\"90px\" height=\"21px\" />\r\n          )}\r\n          {totalStakedTooltipVisible && totalStakedTooltip}\r\n        </Flex>\r\n      </Flex>\r\n      {stakingLimit && stakingLimit.gt(0) && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\">\r\n          <Text small>{t('Max. stake per user')}:</Text>\r\n          <Text small>{`${getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0)} ${stakingToken.symbol}`}</Text>\r\n        </Flex>\r\n      )}\r\n      {shouldShowBlockCountdown && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Text small>{hasPoolStarted ? t('Ends in') : t('Starts in')}:</Text>\r\n          {blocksRemaining || blocksUntilStart ? (\r\n            <Flex alignItems=\"center\">\r\n              <Link external href={getBscScanBlockCountdownUrl(hasPoolStarted ? endBlock : startBlock)}>\r\n                <Balance small value={blocksToDisplay} decimals={0} color=\"primary\" />\r\n                <Text small ml=\"4px\" color=\"primary\" textTransform=\"lowercase\">\r\n                  {t('Blocks')}\r\n                </Text>\r\n                <TimerIcon ml=\"4px\" color=\"primary\" />\r\n              </Link>\r\n            </Flex>\r\n          ) : (\r\n            <Skeleton width=\"54px\" height=\"21px\" />\r\n          )}\r\n        </Flex>\r\n      )}\r\n      {isAutoVault && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          {tooltipVisible && tooltip}\r\n          <TooltipText ref={targetRef} small>\r\n            {t('Performance Fee')}\r\n          </TooltipText>\r\n          <Flex alignItems=\"center\">\r\n            <Text ml=\"4px\" small>\r\n              {performanceFee / 100}%\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n      )}\r\n      <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n        <LinkExternal href={`https://pancakeswap.info/token/${getAddress(earningToken.address)}`} bold={false} small>\r\n          {t('Info site')}\r\n        </LinkExternal>\r\n      </Flex>\r\n      <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n        <LinkExternal href={earningToken.projectLink} bold={false} small>\r\n          {t('View Project Site')}\r\n        </LinkExternal>\r\n      </Flex>\r\n      {poolContractAddress && (\r\n        <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n          <LinkExternal\r\n            href={`${BASE_BSC_SCAN_URL}/address/${isAutoVault ? cakeVaultContractAddress : poolContractAddress}`}\r\n            bold={false}\r\n            small\r\n          >\r\n            {t('View Contract')}\r\n          </LinkExternal>\r\n        </Flex>\r\n      )}\r\n      {account && isMetaMaskInScope && tokenAddress && (\r\n        <Flex justifyContent=\"flex-end\">\r\n          <Button\r\n            variant=\"text\"\r\n            p=\"0\"\r\n            height=\"auto\"\r\n            onClick={() => registerToken(tokenAddress, earningToken.symbol, earningToken.decimals, imageSrc)}\r\n          >\r\n            <Text color=\"primary\" fontSize=\"14px\">\r\n              {t('Add to Metamask')}\r\n            </Text>\r\n            <MetamaskIcon ml=\"4px\" />\r\n          </Button>\r\n        </Flex>\r\n      )}\r\n    </ExpandedWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo(ExpandedFooter)\r\n","import React, { useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Flex, CardFooter, ExpandableLabel, HelpIcon, useTooltip } from '@pancakeswap/uikit'\r\nimport { Pool } from 'state/types'\r\nimport { CompoundingPoolTag, ManualPoolTag } from 'components/Tags'\r\nimport ExpandedFooter from './ExpandedFooter'\r\n\r\ninterface FooterProps {\r\n  pool: Pool\r\n  account: string\r\n  totalCakeInVault?: BigNumber\r\n}\r\n\r\nconst ExpandableButtonWrapper = styled(Flex)`\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  button {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst Footer: React.FC<FooterProps> = ({ pool, account }) => {\r\n  const { isAutoVault } = pool\r\n  const { t } = useTranslation()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  const manualTooltipText = t('You must harvest and compound your earnings from this pool manually.')\r\n  const autoTooltipText = t(\r\n    'Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you.',\r\n  )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(isAutoVault ? autoTooltipText : manualTooltipText, {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  return (\r\n    <CardFooter>\r\n      <ExpandableButtonWrapper>\r\n        <Flex alignItems=\"center\">\r\n          {isAutoVault ? <CompoundingPoolTag /> : <ManualPoolTag />}\r\n          {tooltipVisible && tooltip}\r\n          <Flex ref={targetRef}>\r\n            <HelpIcon ml=\"4px\" width=\"20px\" height=\"20px\" color=\"textSubtle\" />\r\n          </Flex>\r\n        </Flex>\r\n        <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n          {isExpanded ? t('Hide') : t('Details')}\r\n        </ExpandableLabel>\r\n      </ExpandableButtonWrapper>\r\n      {isExpanded && <ExpandedFooter pool={pool} account={account} />}\r\n    </CardFooter>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\nimport { Button, AutoRenewIcon, Skeleton } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useVaultApprove } from 'hooks/useApprove'\r\n\r\ninterface ApprovalActionProps {\r\n  setLastUpdated: () => void\r\n  isLoading?: boolean\r\n}\r\n\r\nconst VaultApprovalAction: React.FC<ApprovalActionProps> = ({ isLoading = false, setLastUpdated }) => {\r\n  const { t } = useTranslation()\r\n\r\n  const { handleApprove, requestedApproval } = useVaultApprove(setLastUpdated)\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Skeleton width=\"100%\" height=\"52px\" />\r\n      ) : (\r\n        <Button\r\n          isLoading={requestedApproval}\r\n          endIcon={requestedApproval ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n          disabled={requestedApproval}\r\n          onClick={handleApprove}\r\n          width=\"100%\"\r\n        >\r\n          {t('Enable')}\r\n        </Button>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default VaultApprovalAction\r\n","import BigNumber from 'bignumber.js'\r\nimport { useEffect, useState } from 'react'\r\n\r\nconst useWithdrawalFeeTimer = (lastDepositedTime: number, userShares: BigNumber, withdrawalFeePeriod = 259200) => {\r\n  const [secondsRemaining, setSecondsRemaining] = useState(null)\r\n  const [hasUnstakingFee, setHasUnstakingFee] = useState(false)\r\n  const [currentSeconds, setCurrentSeconds] = useState(Math.floor(Date.now() / 1000))\r\n\r\n  useEffect(() => {\r\n    const feeEndTime = lastDepositedTime + withdrawalFeePeriod\r\n    const secondsRemainingCalc = feeEndTime - currentSeconds\r\n    const doesUnstakingFeeApply = userShares.gt(0) && secondsRemainingCalc > 0\r\n\r\n    const tick = () => {\r\n      setCurrentSeconds((prevSeconds) => prevSeconds + 1)\r\n    }\r\n    const timerInterval = setInterval(() => tick(), 1000)\r\n    if (doesUnstakingFeeApply) {\r\n      setSecondsRemaining(secondsRemainingCalc)\r\n      setHasUnstakingFee(true)\r\n    } else {\r\n      setHasUnstakingFee(false)\r\n      clearInterval(timerInterval)\r\n    }\r\n\r\n    return () => clearInterval(timerInterval)\r\n  }, [lastDepositedTime, withdrawalFeePeriod, setSecondsRemaining, currentSeconds, userShares])\r\n\r\n  return { hasUnstakingFee, secondsRemaining }\r\n}\r\n\r\nexport default useWithdrawalFeeTimer\r\n","import React from 'react'\r\nimport { Text } from '@pancakeswap/uikit'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst WithdrawalFeeTimer: React.FC<{ secondsRemaining: number }> = ({ secondsRemaining }) => {\r\n  const { t } = useTranslation()\r\n  const { days, hours, minutes } = getTimePeriods(secondsRemaining)\r\n\r\n  return <Text fontSize=\"14px\">{t('%day%d : %hour%h : %minute%m', { day: days, hour: hours, minute: minutes })}</Text>\r\n}\r\n\r\nexport default WithdrawalFeeTimer\r\n","import React from 'react'\r\nimport { Flex, Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport useWithdrawalFeeTimer from 'hooks/cakeVault/useWithdrawalFeeTimer'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport WithdrawalFeeTimer from './WithdrawalFeeTimer'\r\n\r\ninterface UnstakingFeeCountdownRowProps {\r\n  isTableVariant?: boolean\r\n}\r\n\r\nconst UnstakingFeeCountdownRow: React.FC<UnstakingFeeCountdownRowProps> = ({ isTableVariant }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    userData: { lastDepositedTime, userShares },\r\n    fees: { withdrawalFee, withdrawalFeePeriod },\r\n  } = useCakeVault()\r\n  const feeAsDecimal = withdrawalFee / 100 || '-'\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Unstaking fee: %fee%%', { fee: feeAsDecimal })}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'Only applies within 3 days of staking. Unstaking after 3 days will not include a fee. Timer resets every time you stake new CAKE in the pool.',\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'bottom-start' },\r\n  )\r\n\r\n  const { secondsRemaining, hasUnstakingFee } = useWithdrawalFeeTimer(\r\n    parseInt(lastDepositedTime, 10),\r\n    userShares,\r\n    withdrawalFeePeriod,\r\n  )\r\n\r\n  // The user has made a deposit, but has no fee\r\n  const noFeeToPay = lastDepositedTime && !hasUnstakingFee && userShares.gt(0)\r\n\r\n  // Show the timer if a user is connected, has deposited, and has an unstaking fee\r\n  const shouldShowTimer = account && lastDepositedTime && hasUnstakingFee\r\n\r\n  const getRowText = () => {\r\n    if (noFeeToPay) {\r\n      return t('Unstaking Fee').toLowerCase()\r\n    }\r\n    if (shouldShowTimer) {\r\n      return t('unstaking fee until')\r\n    }\r\n    return t('unstaking fee if withdrawn within 72h')\r\n  }\r\n\r\n  return (\r\n    <Flex\r\n      alignItems={isTableVariant ? 'flex-start' : 'center'}\r\n      justifyContent=\"space-between\"\r\n      flexDirection={isTableVariant ? 'column' : 'row'}\r\n    >\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef} small>\r\n        {noFeeToPay ? '0' : feeAsDecimal}% {getRowText()}\r\n      </TooltipText>\r\n      {shouldShowTimer && <WithdrawalFeeTimer secondsRemaining={secondsRemaining} />}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default UnstakingFeeCountdownRow\r\n","import React from 'react'\r\nimport { Text, Flex, useTooltip, TooltipText } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport UnstakingFeeCountdownRow from './UnstakingFeeCountdownRow'\r\n\r\ninterface FeeSummaryProps {\r\n  stakingTokenSymbol: string\r\n  stakeAmount: string\r\n}\r\n\r\nconst FeeSummary: React.FC<FeeSummaryProps> = ({ stakingTokenSymbol, stakeAmount }) => {\r\n  const { t } = useTranslation()\r\n  const {\r\n    fees: { withdrawalFee },\r\n  } = useCakeVault()\r\n  const feeAsDecimal = withdrawalFee / 100\r\n  const feeInCake = (parseFloat(stakeAmount) * (feeAsDecimal / 100)).toFixed(4)\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Unstaking fee: %fee%%', { fee: feeAsDecimal })}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'Only applies within 3 days of staking. Unstaking after 3 days will not include a fee. Timer resets every time you stake new CAKE in the pool.',\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'top-start' },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      <Flex mt=\"24px\" alignItems=\"center\" justifyContent=\"space-between\">\r\n        {tooltipVisible && tooltip}\r\n        <TooltipText ref={targetRef} small>\r\n          {t('Unstaking Fee')}\r\n        </TooltipText>\r\n        <Text fontSize=\"14px\">\r\n          {stakeAmount ? feeInCake : '-'} {stakingTokenSymbol}\r\n        </Text>\r\n      </Flex>\r\n      <UnstakingFeeCountdownRow />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FeeSummary\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Modal, Text, Flex, Image, Button, Slider, BalanceInput, AutoRenewIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { BASE_EXCHANGE_URL } from 'config'\r\nimport { useAppDispatch } from 'state'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { useCakeVault, usePriceCakeBusd } from 'state/hooks'\r\nimport { useCakeVaultContract } from 'hooks/useContract'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useWithdrawalFeeTimer from 'hooks/cakeVault/useWithdrawalFeeTimer'\r\nimport BigNumber from 'bignumber.js'\r\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { fetchCakeVaultUserData } from 'state/pools'\r\nimport { Pool } from 'state/types'\r\nimport { getAddress } from 'utils/addressHelpers'\r\nimport { convertCakeToShares } from '../../helpers'\r\nimport FeeSummary from './FeeSummary'\r\n\r\ninterface VaultStakeModalProps {\r\n  pool: Pool\r\n  stakingMax: BigNumber\r\n  isRemovingStake?: boolean\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst StyledButton = styled(Button)`\r\n  flex-grow: 1;\r\n`\r\n\r\nconst VaultStakeModal: React.FC<VaultStakeModalProps> = ({ pool, stakingMax, isRemovingStake = false, onDismiss }) => {\r\n  const dispatch = useAppDispatch()\r\n  const { stakingToken } = pool\r\n  const { account } = useWeb3React()\r\n  const cakeVaultContract = useCakeVaultContract()\r\n  const {\r\n    userData: { lastDepositedTime, userShares },\r\n    pricePerFullShare,\r\n  } = useCakeVault()\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const [stakeAmount, setStakeAmount] = useState('')\r\n  const [percent, setPercent] = useState(0)\r\n  const { hasUnstakingFee } = useWithdrawalFeeTimer(parseInt(lastDepositedTime, 10), userShares)\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const usdValueStaked =\r\n    cakePriceBusd.gt(0) && stakeAmount ? formatNumber(new BigNumber(stakeAmount).times(cakePriceBusd).toNumber()) : ''\r\n\r\n  const handleStakeInputChange = (input: string) => {\r\n    if (input) {\r\n      const convertedInput = new BigNumber(input).multipliedBy(BIG_TEN.pow(stakingToken.decimals))\r\n      const percentage = Math.floor(convertedInput.dividedBy(stakingMax).multipliedBy(100).toNumber())\r\n      setPercent(percentage > 100 ? 100 : percentage)\r\n    } else {\r\n      setPercent(0)\r\n    }\r\n    setStakeAmount(input)\r\n  }\r\n\r\n  const handleChangePercent = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const percentageOfStakingMax = stakingMax.dividedBy(100).multipliedBy(sliderPercent)\r\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals)\r\n      setStakeAmount(amountToStake)\r\n    } else {\r\n      setStakeAmount('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  const handleWithdrawal = async (convertedStakeAmount: BigNumber) => {\r\n    setPendingTx(true)\r\n    const shareStakeToWithdraw = convertCakeToShares(convertedStakeAmount, pricePerFullShare)\r\n    // trigger withdrawAll function if the withdrawal will leave 0.000001 CAKE or less\r\n    const triggerWithdrawAllThreshold = new BigNumber(1000000000000)\r\n    const sharesRemaining = userShares.minus(shareStakeToWithdraw.sharesAsBigNumber)\r\n    const isWithdrawingAll = sharesRemaining.lte(triggerWithdrawAllThreshold)\r\n\r\n    if (isWithdrawingAll) {\r\n      cakeVaultContract.methods\r\n        .withdrawAll()\r\n        .send({ from: account })\r\n        .on('sending', () => {\r\n          setPendingTx(true)\r\n        })\r\n        .on('receipt', () => {\r\n          toastSuccess(t('Unstaked!'), t('Your earnings have also been harvested to your wallet'))\r\n          setPendingTx(false)\r\n          onDismiss()\r\n          dispatch(fetchCakeVaultUserData({ account }))\r\n        })\r\n        .on('error', (error) => {\r\n          console.error(error)\r\n          // Remove message from toast before prod\r\n          toastError(t('Error'), t('%error% - Please try again.', { error: error.message }))\r\n          setPendingTx(false)\r\n        })\r\n    } else {\r\n      cakeVaultContract.methods\r\n        .withdraw(shareStakeToWithdraw.sharesAsBigNumber.toString())\r\n        // .toString() being called to fix a BigNumber error in prod\r\n        // as suggested here https://github.com/ChainSafe/web3.js/issues/2077\r\n        .send({ from: account })\r\n        .on('sending', () => {\r\n          setPendingTx(true)\r\n        })\r\n        .on('receipt', () => {\r\n          toastSuccess(t('Unstaked!'), t('Your earnings have also been harvested to your wallet'))\r\n          setPendingTx(false)\r\n          onDismiss()\r\n          dispatch(fetchCakeVaultUserData({ account }))\r\n        })\r\n        .on('error', (error) => {\r\n          console.error(error)\r\n          // Remove message from toast before prod\r\n          toastError(t('Error'), t('%error% - Please try again.', { error: error.message }))\r\n          setPendingTx(false)\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleDeposit = async (convertedStakeAmount: BigNumber) => {\r\n    cakeVaultContract.methods\r\n      .deposit(convertedStakeAmount.toString())\r\n      // .toString() being called to fix a BigNumber error in prod\r\n      // as suggested here https://github.com/ChainSafe/web3.js/issues/2077\r\n      .send({ from: account })\r\n      .on('sending', () => {\r\n        setPendingTx(true)\r\n      })\r\n      .on('receipt', () => {\r\n        toastSuccess(t('Staked!'), t('Your funds have been staked in the pool'))\r\n        setPendingTx(false)\r\n        onDismiss()\r\n        dispatch(fetchCakeVaultUserData({ account }))\r\n      })\r\n      .on('error', (error) => {\r\n        console.error(error)\r\n        // Remove message from toast before prod\r\n        toastError(t('Error'), t('%error% - Please try again.', { error: error.message }))\r\n        setPendingTx(false)\r\n      })\r\n  }\r\n\r\n  const handleConfirmClick = async () => {\r\n    const convertedStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)\r\n    setPendingTx(true)\r\n    // unstaking\r\n    if (isRemovingStake) {\r\n      handleWithdrawal(convertedStakeAmount)\r\n      // staking\r\n    } else {\r\n      handleDeposit(convertedStakeAmount)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title={isRemovingStake ? t('Unstake') : t('Stake in Pool')}\r\n      onDismiss={onDismiss}\r\n    >\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Text bold>{isRemovingStake ? t('Unstake') : t('Stake')}:</Text>\r\n        <Flex alignItems=\"center\" minWidth=\"70px\">\r\n          <Image\r\n            src={`/images/tokens/${getAddress(stakingToken.address)}.png`}\r\n            width={24}\r\n            height={24}\r\n            alt={stakingToken.symbol}\r\n          />\r\n          <Text ml=\"4px\" bold>\r\n            {stakingToken.symbol}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n      <BalanceInput\r\n        value={stakeAmount}\r\n        onUserInput={handleStakeInputChange}\r\n        currencyValue={cakePriceBusd.gt(0) && `~${usdValueStaked || 0} USD`}\r\n        decimals={stakingToken.decimals}\r\n      />\r\n      <Text mt=\"8px\" ml=\"auto\" color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\r\n        {t('Balance: %balance%', { balance: getFullDisplayBalance(stakingMax, stakingToken.decimals) })}\r\n      </Text>\r\n      <Slider\r\n        min={0}\r\n        max={100}\r\n        value={percent}\r\n        onValueChanged={handleChangePercent}\r\n        name=\"stake\"\r\n        valueLabel={`${percent}%`}\r\n        step={1}\r\n      />\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mt=\"8px\">\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(25)}>\r\n          25%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(50)}>\r\n          50%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(75)}>\r\n          75%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(100)}>\r\n          {t('Max')}\r\n        </StyledButton>\r\n      </Flex>\r\n      {isRemovingStake && hasUnstakingFee && (\r\n        <FeeSummary stakingTokenSymbol={stakingToken.symbol} stakeAmount={stakeAmount} />\r\n      )}\r\n      <Button\r\n        isLoading={pendingTx}\r\n        endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        onClick={handleConfirmClick}\r\n        disabled={!stakeAmount || parseFloat(stakeAmount) === 0}\r\n        mt=\"24px\"\r\n      >\r\n        {pendingTx ? t('Confirming') : t('Confirm')}\r\n      </Button>\r\n      {!isRemovingStake && (\r\n        <Button mt=\"8px\" as=\"a\" external href={BASE_EXCHANGE_URL} variant=\"secondary\">\r\n          {t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n        </Button>\r\n      )}\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default VaultStakeModal\r\n","import React from 'react'\r\nimport { Flex, Text, IconButton, AddIcon, MinusIcon, useModal, Skeleton } from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { Pool } from 'state/types'\r\nimport { useCakeVault, usePriceCakeBusd } from 'state/hooks'\r\nimport Balance from 'components/Balance'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport { convertSharesToCake } from '../../../helpers'\r\nimport VaultStakeModal from '../VaultStakeModal'\r\n\r\ninterface HasStakeActionProps {\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n}\r\n\r\nconst HasSharesActions: React.FC<HasStakeActionProps> = ({ pool, stakingTokenBalance }) => {\r\n  const {\r\n    userData: { userShares },\r\n    pricePerFullShare,\r\n  } = useCakeVault()\r\n  const { stakingToken } = pool\r\n  const { cakeAsBigNumber, cakeAsNumberBalance } = convertSharesToCake(userShares, pricePerFullShare)\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0)\r\n    ? getBalanceNumber(cakeAsBigNumber.multipliedBy(cakePriceBusd), stakingToken.decimals)\r\n    : 0\r\n\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n  const [onPresentStake] = useModal(<VaultStakeModal stakingMax={stakingTokenBalance} pool={pool} />)\r\n  const [onPresentUnstake] = useModal(<VaultStakeModal stakingMax={cakeAsBigNumber} pool={pool} isRemovingStake />)\r\n\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Flex flexDirection=\"column\">\r\n        <Balance fontSize=\"20px\" bold value={cakeAsNumberBalance} decimals={5} />\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          {cakePriceBusd.gt(0) ? (\r\n            <Balance value={stakedDollarValue} fontSize=\"12px\" color=\"textSubtle\" decimals={2} prefix=\"~\" unit=\" USD\" />\r\n          ) : (\r\n            <Skeleton mt=\"1px\" height={16} width={64} />\r\n          )}\r\n        </Text>\r\n      </Flex>\r\n      <Flex>\r\n        <IconButton variant=\"secondary\" onClick={onPresentUnstake} mr=\"6px\">\r\n          <MinusIcon color=\"primary\" width=\"24px\" />\r\n        </IconButton>\r\n        <IconButton variant=\"secondary\" onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired}>\r\n          <AddIcon color=\"primary\" width=\"24px\" height=\"24px\" />\r\n        </IconButton>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default HasSharesActions\r\n","import React from 'react'\r\nimport { Flex, Button, useModal, Skeleton } from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Pool } from 'state/types'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport VaultStakeModal from '../VaultStakeModal'\r\nimport HasSharesActions from './HasSharesActions'\r\n\r\ninterface VaultStakeActionsProps {\r\n  pool: Pool\r\n  stakingTokenBalance: BigNumber\r\n  accountHasSharesStaked: boolean\r\n  isLoading?: boolean\r\n}\r\n\r\nconst VaultStakeActions: React.FC<VaultStakeActionsProps> = ({\r\n  pool,\r\n  stakingTokenBalance,\r\n  accountHasSharesStaked,\r\n  isLoading = false,\r\n}) => {\r\n  const { stakingToken } = pool\r\n  const { t } = useTranslation()\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n  const [onPresentStake] = useModal(<VaultStakeModal stakingMax={stakingTokenBalance} pool={pool} />)\r\n\r\n  const renderStakeAction = () => {\r\n    return accountHasSharesStaked ? (\r\n      <HasSharesActions pool={pool} stakingTokenBalance={stakingTokenBalance} />\r\n    ) : (\r\n      <Button onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired}>{t('Stake')}</Button>\r\n    )\r\n  }\r\n\r\n  return <Flex flexDirection=\"column\">{isLoading ? <Skeleton width=\"100%\" height=\"52px\" /> : renderStakeAction()}</Flex>\r\n}\r\n\r\nexport default VaultStakeActions\r\n","import BigNumber from 'bignumber.js'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Text, Box } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCheckVaultApprovalStatus } from 'hooks/useApprove'\r\nimport { Pool } from 'state/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport VaultApprovalAction from './VaultApprovalAction'\r\nimport VaultStakeActions from './VaultStakeActions'\r\n\r\nconst InlineText = styled(Text)`\r\n  display: inline;\r\n`\r\n\r\nconst CakeVaultCardActions: React.FC<{\r\n  pool: Pool\r\n  accountHasSharesStaked: boolean\r\n  isLoading: boolean\r\n}> = ({ pool, accountHasSharesStaked, isLoading }) => {\r\n  const { stakingToken, userData } = pool\r\n  const { t } = useTranslation()\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n\r\n  const { isVaultApproved, setLastUpdated } = useCheckVaultApprovalStatus()\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      <Flex flexDirection=\"column\">\r\n        <Box display=\"inline\">\r\n          <InlineText\r\n            color={accountHasSharesStaked ? 'secondary' : 'textSubtle'}\r\n            textTransform=\"uppercase\"\r\n            bold\r\n            fontSize=\"12px\"\r\n          >\r\n            {accountHasSharesStaked ? stakingToken.symbol : t('Stake')}{' '}\r\n          </InlineText>\r\n          <InlineText\r\n            color={accountHasSharesStaked ? 'textSubtle' : 'secondary'}\r\n            textTransform=\"uppercase\"\r\n            bold\r\n            fontSize=\"12px\"\r\n          >\r\n            {accountHasSharesStaked ? t('Staked (compounding)') : `${stakingToken.symbol}`}\r\n          </InlineText>\r\n        </Box>\r\n        {isVaultApproved ? (\r\n          <VaultStakeActions\r\n            isLoading={isLoading}\r\n            pool={pool}\r\n            stakingTokenBalance={stakingTokenBalance}\r\n            accountHasSharesStaked={accountHasSharesStaked}\r\n          />\r\n        ) : (\r\n          <VaultApprovalAction isLoading={isLoading} setLastUpdated={setLastUpdated} />\r\n        )}\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default CakeVaultCardActions\r\n","import React from 'react'\r\nimport { Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Balance from 'components/Balance'\r\n\r\ninterface RecentCakeProfitBalanceProps {\r\n  cakeToDisplay: number\r\n  dollarValueToDisplay: number\r\n  dateStringToDisplay: string\r\n}\r\n\r\nconst RecentCakeProfitBalance: React.FC<RecentCakeProfitBalanceProps> = ({\r\n  cakeToDisplay,\r\n  dollarValueToDisplay,\r\n  dateStringToDisplay,\r\n}) => {\r\n  const { t } = useTranslation()\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Balance fontSize=\"16px\" value={cakeToDisplay} decimals={3} bold unit=\" CAKE\" />\r\n      <Balance fontSize=\"16px\" value={dollarValueToDisplay} decimals={2} bold prefix=\"~$\" />\r\n      {t('Earned since your last action')}\r\n      <Text>{dateStringToDisplay}</Text>\r\n    </>,\r\n    {\r\n      placement: 'bottom-end',\r\n    },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef} small>\r\n        <Balance fontSize=\"14px\" value={cakeToDisplay} />\r\n      </TooltipText>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RecentCakeProfitBalance\r\n","import React from 'react'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCakeVault, usePriceCakeBusd } from 'state/hooks'\r\nimport { getCakeVaultEarnings } from 'views/Pools/helpers'\r\nimport RecentCakeProfitBalance from './RecentCakeProfitBalance'\r\n\r\nconst RecentCakeProfitCountdownRow = () => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    pricePerFullShare,\r\n    userData: { cakeAtLastUserAction, userShares, lastUserActionTime },\r\n  } = useCakeVault()\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const { hasAutoEarnings, autoCakeToDisplay, autoUsdToDisplay } = getCakeVaultEarnings(\r\n    account,\r\n    cakeAtLastUserAction,\r\n    userShares,\r\n    pricePerFullShare,\r\n    cakePriceBusd.toNumber(),\r\n  )\r\n\r\n  const lastActionInMs = lastUserActionTime && parseInt(lastUserActionTime) * 1000\r\n  const dateTimeLastAction = new Date(lastActionInMs)\r\n  const dateStringToDisplay = dateTimeLastAction.toLocaleString()\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n      <Text fontSize=\"14px\">{`${t('Recent CAKE profit')}:`}</Text>\r\n      {hasAutoEarnings && (\r\n        <RecentCakeProfitBalance\r\n          cakeToDisplay={autoCakeToDisplay}\r\n          dollarValueToDisplay={autoUsdToDisplay}\r\n          dateStringToDisplay={dateStringToDisplay}\r\n        />\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default RecentCakeProfitCountdownRow\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Text, useMatchBreakpoints } from '@sparkpointio/sparkswap-uikit'\r\nimport {Box,CardBody} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport tokens from 'config/constants/tokens'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport { Pool } from 'state/types'\r\nimport AprRow from '../PoolCard/AprRow'\r\nimport { StyledCard, StyledCardInner } from '../PoolCard/StyledCard'\r\nimport CardFooter from '../PoolCard/CardFooter'\r\nimport StyledCardHeader from '../PoolCard/StyledCardHeader'\r\nimport VaultCardActions from './VaultCardActions'\r\nimport UnstakingFeeCountdownRow from './UnstakingFeeCountdownRow'\r\nimport RecentCakeProfitRow from './RecentCakeProfitRow'\r\n\r\nconst StyledCardBody = styled(CardBody)<{ isLoading: boolean }>`\r\n  min-height: ${({ isLoading }) => (isLoading ? '0' : '254px')};\r\n`\r\n\r\ninterface CakeVaultProps {\r\n  pool: Pool\r\n  showStakedOnly: boolean\r\n}\r\n\r\nconst CakeVaultCard: React.FC<CakeVaultProps> = ({ pool, showStakedOnly }) => {\r\n  const { t } = useTranslation()\r\n  const { isXl } = useMatchBreakpoints()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    userData: { userShares, isLoading: isVaultUserDataLoading },\r\n    fees: { performanceFee },\r\n  } = useCakeVault()\r\n\r\n  const accountHasSharesStaked = userShares && userShares.gt(0)\r\n  const isLoading = !pool.userData || isVaultUserDataLoading\r\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\r\n\r\n  if (showStakedOnly && !accountHasSharesStaked) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <StyledCard>\r\n      <StyledCardInner>\r\n        <StyledCardHeader\r\n          isStaking={accountHasSharesStaked}\r\n          isAutoVault\r\n          earningToken={tokens.cake}\r\n          stakingToken={tokens.cake}\r\n        />\r\n        <StyledCardBody isLoading={isLoading}>\r\n          <AprRow pool={pool} performanceFee={performanceFeeAsDecimal} />\r\n          <Box mt=\"24px\">\r\n            <RecentCakeProfitRow />\r\n          </Box>\r\n          <Box mt=\"8px\">\r\n            <UnstakingFeeCountdownRow />\r\n          </Box>\r\n          <Flex mt=\"32px\" flexDirection=\"column\">\r\n            {account ? (\r\n              <VaultCardActions pool={pool} accountHasSharesStaked={accountHasSharesStaked} isLoading={isLoading} />\r\n            ) : (\r\n              <>\r\n                <Text mb=\"10px\" textTransform=\"uppercase\" fontSize=\"12px\" color=\"textSubtle\" bold>\r\n                  {t('Start earning')}\r\n                </Text>\r\n                <UnlockButton />\r\n              </>\r\n            )}\r\n          </Flex>\r\n        </StyledCardBody>\r\n        <CardFooter pool={pool} account={account} />\r\n      </StyledCardInner>\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default CakeVaultCard\r\n","import { Flex, Text } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\n\r\nconst BaseCell = styled.div`\r\n  color: black;\r\n\r\n  padding: 24px 8px;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n`\r\n\r\nexport const CellContent = styled(Flex)`\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  max-height: 40px;\r\n  ${Text} {\r\n    line-height: 1;\r\n  }\r\n`\r\n\r\nexport default BaseCell\r\n","import React from 'react'\r\nimport styled, { keyframes, css } from 'styled-components'\r\nimport {\r\n  Box,\r\n  Button,\r\n  Flex,\r\n  HelpIcon,\r\n  Link,\r\n  LinkExternal,\r\n  MetamaskIcon,\r\n  Skeleton,\r\n  Text,\r\n  TimerIcon,\r\n  useTooltip,\r\n} from '@pancakeswap/uikit'\r\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config'\r\nimport { getBscScanBlockCountdownUrl } from 'utils/bscscan'\r\nimport { useBlock, useCakeVault } from 'state/hooks'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Pool } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Balance from 'components/Balance'\r\nimport { CompoundingPoolTag, ManualPoolTag } from 'components/Tags'\r\nimport { getAddress, getCakeVaultAddress } from 'utils/addressHelpers'\r\nimport { registerToken } from 'utils/wallet'\r\nimport { getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\r\nimport Harvest from './Harvest'\r\nimport Stake from './Stake'\r\nimport Apr from '../Apr'\r\n\r\nconst expandAnimation = keyframes`\r\n  from {\r\n    max-height: 0px;\r\n  }\r\n  to {\r\n    max-height: 700px;\r\n  }\r\n`\r\n\r\nconst collapseAnimation = keyframes`\r\n  from {\r\n    max-height: 700px;\r\n  }\r\n  to {\r\n    max-height: 0px;\r\n  }\r\n`\r\n\r\nconst StyledActionPanel = styled.div<{ expanded: boolean }>`\r\n  animation: ${({ expanded }) =>\r\n    expanded\r\n      ? css`\r\n          ${expandAnimation} 300ms linear forwards\r\n        `\r\n      : css`\r\n          ${collapseAnimation} 300ms linear forwards\r\n        `};\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column-reverse;\r\n  justify-content: center;\r\n  padding: 12px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    flex-direction: row;\r\n    padding: 16px 32px;\r\n  }\r\n`\r\n\r\nconst ActionContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    flex-grow: 1;\r\n    flex-basis: 0;\r\n  }\r\n`\r\n\r\ntype MediaBreakpoints = {\r\n  isXs: boolean\r\n  isSm: boolean\r\n  isMd: boolean\r\n  isLg: boolean\r\n  isXl: boolean\r\n}\r\n\r\ninterface ActionPanelProps {\r\n  account: string\r\n  pool: Pool\r\n  userDataLoaded: boolean\r\n  expanded: boolean\r\n  breakpoints: MediaBreakpoints\r\n}\r\n\r\nconst InfoSection = styled(Box)`\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n  flex-basis: auto;\r\n  padding: 8px 8px;\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    padding: 0;\r\n    flex-basis: 230px;\r\n  }\r\n`\r\n\r\nconst ActionPanel: React.FC<ActionPanelProps> = ({ account, pool, userDataLoaded, expanded, breakpoints }) => {\r\n  const {\r\n    sousId,\r\n    stakingToken,\r\n    earningToken,\r\n    totalStaked,\r\n    startBlock,\r\n    endBlock,\r\n    stakingLimit,\r\n    contractAddress,\r\n    isAutoVault,\r\n  } = pool\r\n  const { t } = useTranslation()\r\n  const poolContractAddress = getAddress(contractAddress)\r\n  const cakeVaultContractAddress = getCakeVaultAddress()\r\n  const { currentBlock } = useBlock()\r\n  const { isXs, isSm, isMd } = breakpoints\r\n  const showSubtitle = (isXs || isSm) && sousId === 0\r\n\r\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\r\n    getPoolBlockInfo(pool, currentBlock)\r\n\r\n  const isMetaMaskInScope = !!(window as WindowChain).ethereum?.isMetaMask\r\n  const tokenAddress = earningToken.address ? getAddress(earningToken.address) : ''\r\n  const imageSrc = `${BASE_URL}/images/tokens/${tokenAddress}.png`\r\n\r\n  const {\r\n    totalCakeInVault,\r\n    fees: { performanceFee },\r\n  } = useCakeVault()\r\n\r\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const getTotalStakedBalance = () => {\r\n    if (isAutoVault) {\r\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals)\r\n    }\r\n    if (isManualCakePool) {\r\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(totalCakeInVault)\r\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals)\r\n    }\r\n    return getBalanceNumber(totalStaked, stakingToken.decimals)\r\n  }\r\n\r\n  const {\r\n    targetRef: totalStakedTargetRef,\r\n    tooltip: totalStakedTooltip,\r\n    tooltipVisible: totalStakedTooltipVisible,\r\n  } = useTooltip(t('Total amount of %symbol% staked in this pool', { symbol: stakingToken.symbol }), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  const manualTooltipText = t('You must harvest and compound your earnings from this pool manually.')\r\n  const autoTooltipText = t(\r\n    'Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you.',\r\n  )\r\n\r\n  const {\r\n    targetRef: tagTargetRef,\r\n    tooltip: tagTooltip,\r\n    tooltipVisible: tagTooltipVisible,\r\n  } = useTooltip(isAutoVault ? autoTooltipText : manualTooltipText, {\r\n    placement: 'bottom-start',\r\n  })\r\n\r\n  const maxStakeRow = stakingLimit.gt(0) ? (\r\n    <Flex mb=\"8px\" justifyContent=\"space-between\">\r\n      <Text>{t('Max. stake per user')}:</Text>\r\n      <Text>{`${getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0)} ${stakingToken.symbol}`}</Text>\r\n    </Flex>\r\n  ) : null\r\n\r\n  const blocksRow =\r\n    blocksRemaining || blocksUntilStart ? (\r\n      <Flex mb=\"8px\" justifyContent=\"space-between\">\r\n        <Text>{hasPoolStarted ? t('Ends in') : t('Starts in')}:</Text>\r\n        <Flex>\r\n          <Link external href={getBscScanBlockCountdownUrl(hasPoolStarted ? endBlock : startBlock)}>\r\n            <Balance fontSize=\"16px\" value={blocksToDisplay} decimals={0} color=\"primary\" />\r\n            <Text ml=\"4px\" color=\"primary\" textTransform=\"lowercase\">\r\n              {t('Blocks')}\r\n            </Text>\r\n            <TimerIcon ml=\"4px\" color=\"primary\" />\r\n          </Link>\r\n        </Flex>\r\n      </Flex>\r\n    ) : (\r\n      <Skeleton width=\"56px\" height=\"16px\" />\r\n    )\r\n\r\n  const aprRow = (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"8px\">\r\n      <Text>{isAutoVault ? t('APY') : t('APR')}:</Text>\r\n      <Apr pool={pool} showIcon performanceFee={isAutoVault ? performanceFeeAsDecimal : 0} />\r\n    </Flex>\r\n  )\r\n\r\n  const totalStakedRow = (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"8px\">\r\n      <Text maxWidth={['50px', '100%']}>{t('Total staked')}:</Text>\r\n      <Flex alignItems=\"center\">\r\n        {totalStaked && totalStaked.gte(0) ? (\r\n          <>\r\n            <Balance fontSize=\"16px\" value={getTotalStakedBalance()} decimals={0} unit={` ${stakingToken.symbol}`} />\r\n            <span ref={totalStakedTargetRef}>\r\n              <HelpIcon color=\"textSubtle\" width=\"20px\" ml=\"6px\" />\r\n            </span>\r\n          </>\r\n        ) : (\r\n          <Skeleton width=\"56px\" height=\"16px\" />\r\n        )}\r\n        {totalStakedTooltipVisible && totalStakedTooltip}\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n\r\n  return (\r\n    <StyledActionPanel expanded={expanded}>\r\n      <InfoSection>\r\n        {maxStakeRow}\r\n        {(isXs || isSm) && aprRow}\r\n        {(isXs || isSm || isMd) && totalStakedRow}\r\n        {shouldShowBlockCountdown && blocksRow}\r\n        <Flex mb=\"8px\" justifyContent={['flex-end', 'flex-end', 'flex-start']}>\r\n          <LinkExternal href={`https://pancakeswap.info/token/${getAddress(earningToken.address)}`} bold={false}>\r\n            {t('Info site')}\r\n          </LinkExternal>\r\n        </Flex>\r\n        <Flex mb=\"8px\" justifyContent={['flex-end', 'flex-end', 'flex-start']}>\r\n          <LinkExternal href={earningToken.projectLink} bold={false}>\r\n            {t('View Project Site')}\r\n          </LinkExternal>\r\n        </Flex>\r\n        {poolContractAddress && (\r\n          <Flex mb=\"8px\" justifyContent={['flex-end', 'flex-end', 'flex-start']}>\r\n            <LinkExternal\r\n              href={`${BASE_BSC_SCAN_URL}/address/${isAutoVault ? cakeVaultContractAddress : poolContractAddress}`}\r\n              bold={false}\r\n            >\r\n              {t('View Contract')}\r\n            </LinkExternal>\r\n          </Flex>\r\n        )}\r\n        {account && isMetaMaskInScope && tokenAddress && (\r\n          <Flex mb=\"8px\" justifyContent={['flex-end', 'flex-end', 'flex-start']}>\r\n            <Button\r\n              variant=\"text\"\r\n              p=\"0\"\r\n              height=\"auto\"\r\n              onClick={() => registerToken(tokenAddress, earningToken.symbol, earningToken.decimals, imageSrc)}\r\n            >\r\n              <Text color=\"primary\">{t('Add to Metamask')}</Text>\r\n              <MetamaskIcon ml=\"4px\" />\r\n            </Button>\r\n          </Flex>\r\n        )}\r\n        {isAutoVault ? <CompoundingPoolTag /> : <ManualPoolTag />}\r\n        {tagTooltipVisible && tagTooltip}\r\n        <span ref={tagTargetRef}>\r\n          <HelpIcon ml=\"4px\" width=\"20px\" height=\"20px\" color=\"textSubtle\" />\r\n        </span>\r\n      </InfoSection>\r\n      <ActionContainer>\r\n        {showSubtitle && (\r\n          <Text mt=\"4px\" mb=\"16px\" color=\"textSubtle\">\r\n            {isAutoVault ? t('Automatic restaking') : `${t('Earn')} CAKE ${t('Stake').toLocaleLowerCase()} CAKE`}\r\n          </Text>\r\n        )}\r\n        <Harvest {...pool} userDataLoaded={userDataLoaded} />\r\n        <Stake pool={pool} userDataLoaded={userDataLoaded} />\r\n      </ActionContainer>\r\n    </StyledActionPanel>\r\n  )\r\n}\r\n\r\nexport default ActionPanel\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Text, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport { Pool } from 'state/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport TokenPairImage from 'components/TokenPairImage'\r\nimport CakeVaultTokenPairImage from '../../CakeVaultCard/CakeVaultTokenPairImage'\r\nimport BaseCell, { CellContent } from './BaseCell'\r\n\r\ninterface NameCellProps {\r\n  pool: Pool\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex: 5;\r\n  flex-direction: row;\r\n  padding-left: 12px;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    flex: 1 0 150px;\r\n    padding-left: 32px;\r\n  }\r\n`\r\n\r\nconst NameCell: React.FC<NameCellProps> = ({ pool }) => {\r\n  const { t } = useTranslation()\r\n  const { isXs, isSm } = useMatchBreakpoints()\r\n  const { sousId, stakingToken, earningToken, userData, isFinished, isAutoVault } = pool\r\n  const {\r\n    userData: { userShares },\r\n  } = useCakeVault()\r\n  const hasVaultShares = userShares && userShares.gt(0)\r\n\r\n  const stakingTokenSymbol = stakingToken.symbol\r\n  const earningTokenSymbol = earningToken.symbol\r\n\r\n  const stakedBalance = userData?.stakedBalance ? new BigNumber(userData.stakedBalance) : BIG_ZERO\r\n  const isStaked = stakedBalance.gt(0)\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const showStakedTag = isAutoVault ? hasVaultShares : isStaked\r\n\r\n  let title = `${t('Earn')} ${earningTokenSymbol}`\r\n  let subtitle = `${t('Stake')} ${stakingTokenSymbol}`\r\n  const showSubtitle = sousId !== 0 || (sousId === 0 && !isXs && !isSm)\r\n\r\n  if (isAutoVault) {\r\n    title = t('Auto CAKE')\r\n    subtitle = t('Automatic restaking')\r\n  } else if (isManualCakePool) {\r\n    title = t('Manual CAKE')\r\n    subtitle = `${t('Earn')} CAKE ${t('Stake').toLocaleLowerCase()} CAKE`\r\n  }\r\n\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      {isAutoVault ? (\r\n        <CakeVaultTokenPairImage mr=\"8px\" width={40} height={40} />\r\n      ) : (\r\n        <TokenPairImage primaryToken={earningToken} secondaryToken={stakingToken} mr=\"8px\" width={40} height={40} />\r\n      )}\r\n      <CellContent>\r\n        {showStakedTag && (\r\n          <Text fontSize=\"12px\" bold color={isFinished ? 'failure' : 'secondary'} textTransform=\"uppercase\">\r\n            {t('Staked')}\r\n          </Text>\r\n        )}\r\n        <Text bold={!isXs && !isSm} small={isXs || isSm}>\r\n          {title}\r\n        </Text>\r\n        {showSubtitle && (\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {subtitle}\r\n          </Text>\r\n        )}\r\n      </CellContent>\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default NameCell\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Skeleton, Text, useTooltip, HelpIcon, Flex, Box, useModal, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport { Pool } from 'state/types'\r\nimport BigNumber from 'bignumber.js'\r\nimport { PoolCategory } from 'config/constants/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { formatNumber, getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport Balance from 'components/Balance'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getCakeVaultEarnings } from 'views/Pools/helpers'\r\nimport BaseCell, { CellContent } from './BaseCell'\r\nimport CollectModal from '../../PoolCard/Modals/CollectModal'\r\n\r\ninterface EarningsCellProps {\r\n  pool: Pool\r\n  account: string\r\n  userDataLoaded: boolean\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex: 4.5;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    flex: 1 0 120px;\r\n  }\r\n`\r\n\r\nconst HelpIconWrapper = styled.div`\r\n  align-self: center;\r\n`\r\n\r\nconst EarningsCell: React.FC<EarningsCellProps> = ({ pool, account, userDataLoaded }) => {\r\n  const { t } = useTranslation()\r\n  const { isXs, isSm } = useMatchBreakpoints()\r\n  const { sousId, earningToken, poolCategory, userData, earningTokenPrice, isAutoVault } = pool\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const earnings = userData?.pendingReward ? new BigNumber(userData.pendingReward) : BIG_ZERO\r\n  // These will be reassigned later if its Auto CAKE vault\r\n  let earningTokenBalance = getBalanceNumber(earnings, earningToken.decimals)\r\n  let earningTokenDollarBalance = getBalanceNumber(earnings.multipliedBy(earningTokenPrice), earningToken.decimals)\r\n  let hasEarnings = account && earnings.gt(0)\r\n  const fullBalance = getFullDisplayBalance(earnings, earningToken.decimals)\r\n  const formattedBalance = formatNumber(earningTokenBalance, 3, 3)\r\n  const earningsDollarValue = formatNumber(earningTokenDollarBalance)\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n\r\n  // Auto CAKE vault calculations\r\n  const {\r\n    userData: { cakeAtLastUserAction, userShares, lastUserActionTime },\r\n    pricePerFullShare,\r\n  } = useCakeVault()\r\n  const { hasAutoEarnings, autoCakeToDisplay, autoUsdToDisplay } = getCakeVaultEarnings(\r\n    account,\r\n    cakeAtLastUserAction,\r\n    userShares,\r\n    pricePerFullShare,\r\n    earningTokenPrice,\r\n  )\r\n\r\n  const lastActionInMs = lastUserActionTime && parseInt(lastUserActionTime) * 1000\r\n  const dateTimeLastAction = new Date(lastActionInMs)\r\n  const dateStringToDisplay = dateTimeLastAction.toLocaleString()\r\n\r\n  const labelText = isAutoVault ? t('Recent CAKE profit') : t('%asset% Earned', { asset: earningToken.symbol })\r\n  earningTokenBalance = isAutoVault ? autoCakeToDisplay : earningTokenBalance\r\n  hasEarnings = isAutoVault ? hasAutoEarnings : hasEarnings\r\n  earningTokenDollarBalance = isAutoVault ? autoUsdToDisplay : earningTokenDollarBalance\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Balance fontSize=\"16px\" value={autoCakeToDisplay} decimals={3} bold unit=\" CAKE\" />\r\n      <Balance fontSize=\"16px\" value={autoUsdToDisplay} decimals={2} bold prefix=\"~$\" />\r\n      {t('Earned since your last action')}\r\n      <Text>{dateStringToDisplay}</Text>\r\n    </>,\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const [onPresentCollect] = useModal(\r\n    <CollectModal\r\n      formattedBalance={formattedBalance}\r\n      fullBalance={fullBalance}\r\n      earningToken={earningToken}\r\n      earningsDollarValue={earningsDollarValue}\r\n      sousId={sousId}\r\n      isBnbPool={isBnbPool}\r\n      isCompoundPool={isManualCakePool}\r\n    />,\r\n  )\r\n\r\n  const handleEarningsClick = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.stopPropagation()\r\n    onPresentCollect()\r\n  }\r\n\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      <CellContent>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" textAlign=\"left\">\r\n          {labelText}\r\n        </Text>\r\n        {!userDataLoaded && account ? (\r\n          <Skeleton width=\"80px\" height=\"16px\" />\r\n        ) : (\r\n          <>\r\n            {tooltipVisible && tooltip}\r\n            <Flex>\r\n              <Box mr=\"8px\" height=\"32px\" onClick={!isAutoVault && hasEarnings ? handleEarningsClick : undefined}>\r\n                <Balance\r\n                  mt=\"4px\"\r\n                  bold={!isXs && !isSm}\r\n                  fontSize={isXs || isSm ? '14px' : '16px'}\r\n                  color={hasEarnings ? 'primary' : 'textDisabled'}\r\n                  decimals={hasEarnings ? 5 : 1}\r\n                  value={hasEarnings ? earningTokenBalance : 0}\r\n                />\r\n                {hasEarnings ? (\r\n                  <Balance\r\n                    display=\"inline\"\r\n                    fontSize=\"12px\"\r\n                    color={hasEarnings ? 'textSubtle' : 'textDisabled'}\r\n                    decimals={2}\r\n                    value={earningTokenDollarBalance}\r\n                    unit=\" USD\"\r\n                    prefix=\"~\"\r\n                  />\r\n                ) : (\r\n                  <Text mt=\"4px\" fontSize=\"12px\" color={hasEarnings ? 'textSubtle' : 'textDisabled'}>\r\n                    0 USD\r\n                  </Text>\r\n                )}\r\n              </Box>\r\n              {isAutoVault && hasEarnings && !isXs && !isSm && (\r\n                <HelpIconWrapper ref={targetRef}>\r\n                  <HelpIcon color=\"textSubtle\" />\r\n                </HelpIconWrapper>\r\n              )}\r\n            </Flex>\r\n          </>\r\n        )}\r\n      </CellContent>\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default EarningsCell\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport { Pool } from 'state/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport BaseCell, { CellContent } from './BaseCell'\r\nimport Apr from '../Apr'\r\n\r\ninterface AprCellProps {\r\n  pool: Pool\r\n  performanceFee: number\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex: 1 0 50px;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex: 0 0 120px;\r\n  }\r\n`\r\n\r\nconst AprCell: React.FC<AprCellProps> = ({ pool, performanceFee }) => {\r\n  const { t } = useTranslation()\r\n  const { isXs, isSm } = useMatchBreakpoints()\r\n  const { isAutoVault } = pool\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      <CellContent>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" textAlign=\"left\">\r\n          {isAutoVault ? t('APY') : t('APR')}\r\n        </Text>\r\n        <Apr\r\n          pool={pool}\r\n          performanceFee={isAutoVault ? performanceFee : 0}\r\n          showIcon={!isXs && !isSm}\r\n          alignItems=\"flex-start\"\r\n        />\r\n      </CellContent>\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default AprCell\r\n","import React, { useMemo } from 'react'\r\nimport { Flex, Skeleton, Text } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport BigNumber from 'bignumber.js'\r\nimport Balance from 'components/Balance'\r\nimport { Pool } from 'state/types'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport BaseCell, { CellContent } from './BaseCell'\r\n\r\ninterface TotalStakedCellProps {\r\n  pool: Pool\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex: 2 0 100px;\r\n`\r\n\r\nconst TotalStakedCell: React.FC<TotalStakedCellProps> = ({ pool }) => {\r\n  const { t } = useTranslation()\r\n  const { sousId, stakingToken, totalStaked, isAutoVault } = pool\r\n  const { totalCakeInVault } = useCakeVault()\r\n\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const totalStakedBalance = useMemo(() => {\r\n    if (isAutoVault) {\r\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals)\r\n    }\r\n    if (isManualCakePool) {\r\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(totalCakeInVault)\r\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals)\r\n    }\r\n    return getBalanceNumber(totalStaked, stakingToken.decimals)\r\n  }, [isAutoVault, totalCakeInVault, isManualCakePool, totalStaked, stakingToken.decimals])\r\n\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      <CellContent>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" textAlign=\"left\">\r\n          {t('Total staked')}\r\n        </Text>\r\n        {totalStaked && totalStaked.gte(0) ? (\r\n          <Flex height=\"100%\" alignItems=\"center\">\r\n            <Balance fontSize=\"16px\" value={totalStakedBalance} decimals={0} unit={` ${stakingToken.symbol}`} />\r\n          </Flex>\r\n        ) : (\r\n          <Skeleton width=\"80px\" height=\"16px\" />\r\n        )}\r\n      </CellContent>\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default TotalStakedCell\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Link, Skeleton, Text, TimerIcon } from '@pancakeswap/uikit'\r\nimport { getBscScanBlockCountdownUrl } from 'utils/bscscan'\r\nimport { Pool } from 'state/types'\r\nimport { useBlock } from 'state/hooks'\r\nimport Balance from 'components/Balance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\r\nimport BaseCell, { CellContent } from './BaseCell'\r\n\r\ninterface FinishCellProps {\r\n  pool: Pool\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex: 2 0 100px;\r\n`\r\n\r\nconst EndsInCell: React.FC<FinishCellProps> = ({ pool }) => {\r\n  const { sousId, totalStaked, startBlock, endBlock, isFinished } = pool\r\n  const { currentBlock } = useBlock()\r\n  const { t } = useTranslation()\r\n\r\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\r\n    getPoolBlockInfo(pool, currentBlock)\r\n\r\n  const isCakePool = sousId === 0\r\n\r\n  const renderBlocks = shouldShowBlockCountdown ? (\r\n    <Flex alignItems=\"center\">\r\n      <Flex flex=\"1.3\">\r\n        <Balance fontSize=\"16px\" value={blocksToDisplay} decimals={0} />\r\n        <Text ml=\"4px\" textTransform=\"lowercase\">\r\n          {t('Blocks')}\r\n        </Text>\r\n      </Flex>\r\n      <Flex flex=\"1\">\r\n        <Link\r\n          external\r\n          href={getBscScanBlockCountdownUrl(hasPoolStarted ? endBlock : startBlock)}\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          <TimerIcon ml=\"4px\" />\r\n        </Link>\r\n      </Flex>\r\n    </Flex>\r\n  ) : (\r\n    <Text>-</Text>\r\n  )\r\n\r\n  // A bit hacky way to determine if public data is loading relying on totalStaked\r\n  // Opted to go for this since we don't really need a separate publicDataLoaded flag\r\n  // anywhere else\r\n  const isLoadingPublicData = !totalStaked.gt(0) || !currentBlock || (!blocksRemaining && !blocksUntilStart)\r\n  const showLoading = isLoadingPublicData && !isCakePool && !isFinished\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      <CellContent>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" textAlign=\"left\">\r\n          {hasPoolStarted || !shouldShowBlockCountdown ? t('Ends in') : t('Starts in')}\r\n        </Text>\r\n        {showLoading ? <Skeleton width=\"80px\" height=\"16px\" /> : renderBlocks}\r\n      </CellContent>\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default EndsInCell\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, ChevronDownIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport BaseCell from './BaseCell'\r\n\r\ninterface ExpandActionCellProps {\r\n  expanded: boolean\r\n  isFullLayout: boolean\r\n}\r\n\r\nconst StyledCell = styled(BaseCell)`\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  flex: 1;\r\n  padding-right: 12px;\r\n  padding-left: 0px;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex: 0 0 120px;\r\n    padding-right: 32px;\r\n    padding-left: 8px;\r\n  }\r\n`\r\n\r\nconst ArrowIcon = styled(ChevronDownIcon)<{ toggled: boolean }>`\r\n  transform: ${({ toggled }) => (toggled ? 'rotate(180deg)' : 'rotate(0)')};\r\n  height: 24px;\r\n`\r\n\r\nconst TotalStakedCell: React.FC<ExpandActionCellProps> = ({ expanded, isFullLayout }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <StyledCell role=\"cell\">\r\n      {isFullLayout && (\r\n        <Text color=\"primary\" bold>\r\n          {expanded ? t('Hide') : t('Details')}\r\n        </Text>\r\n      )}\r\n      <ArrowIcon color=\"primary\" toggled={expanded} />\r\n    </StyledCell>\r\n  )\r\n}\r\n\r\nexport default TotalStakedCell\r\n","import styled from 'styled-components'\r\n\r\nexport const ActionContainer = styled.div`\r\n  padding: 16px;\r\n  border: 2px solid ${({ theme }) => theme.colors.input};\r\n  border-radius: 16px;\r\n  flex-grow: 1;\r\n  flex-basis: 0;\r\n  margin-bottom: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: 12px;\r\n    margin-right: 12px;\r\n    margin-bottom: 0;\r\n    height: 130px;\r\n    max-height: 130px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    margin-left: 32px;\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    height: 130px;\r\n    max-height: 130px;\r\n  }\r\n`\r\n\r\nexport const ActionTitles = styled.div`\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n`\r\n\r\nexport const ActionContent = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Button, useModal, IconButton, AddIcon, MinusIcon, Skeleton, useTooltip, Flex, Text } from '@pancakeswap/uikit'\r\nimport UnlockButton from 'components/UnlockButton'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport { Pool } from 'state/types'\r\nimport Balance from 'components/Balance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCheckVaultApprovalStatus, useSousApprove, useVaultApprove } from 'hooks/useApprove'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { PoolCategory } from 'config/constants/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { getAddress } from 'utils/addressHelpers'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport { convertSharesToCake } from 'views/Pools/helpers'\r\nimport { ActionContainer, ActionTitles, ActionContent } from './styles'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport StakeModal from '../../PoolCard/Modals/StakeModal'\r\nimport VaultStakeModal from '../../CakeVaultCard/VaultStakeModal'\r\n\r\nconst IconButtonWrapper = styled.div`\r\n  display: flex;\r\n`\r\n\r\ninterface StackedActionProps {\r\n  pool: Pool\r\n  userDataLoaded: boolean\r\n}\r\n\r\nconst Staked: React.FunctionComponent<StackedActionProps> = ({ pool, userDataLoaded }) => {\r\n  const {\r\n    sousId,\r\n    stakingToken,\r\n    earningToken,\r\n    stakingLimit,\r\n    isFinished,\r\n    poolCategory,\r\n    userData,\r\n    stakingTokenPrice,\r\n    isAutoVault,\r\n  } = pool\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n\r\n  const stakingTokenContract = useERC20(stakingToken.address ? getAddress(stakingToken.address) : '')\r\n  const { handleApprove: handlePoolApprove, requestedApproval: requestedPoolApproval } = useSousApprove(\r\n    stakingTokenContract,\r\n    sousId,\r\n    earningToken.symbol,\r\n  )\r\n\r\n  const { isVaultApproved, setLastUpdated } = useCheckVaultApprovalStatus()\r\n  const { handleApprove: handleVaultApprove, requestedApproval: requestedVaultApproval } =\r\n    useVaultApprove(setLastUpdated)\r\n\r\n  const handleApprove = isAutoVault ? handleVaultApprove : handlePoolApprove\r\n  const requestedApproval = isAutoVault ? requestedVaultApproval : requestedPoolApproval\r\n\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n  const allowance = userData?.allowance ? new BigNumber(userData.allowance) : BIG_ZERO\r\n  const stakedBalance = userData?.stakedBalance ? new BigNumber(userData.stakedBalance) : BIG_ZERO\r\n  const isNotVaultAndHasStake = !isAutoVault && stakedBalance.gt(0)\r\n\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n\r\n  const stakedTokenBalance = getBalanceNumber(stakedBalance, stakingToken.decimals)\r\n  const stakedTokenDollarBalance = getBalanceNumber(\r\n    stakedBalance.multipliedBy(stakingTokenPrice),\r\n    stakingToken.decimals,\r\n  )\r\n\r\n  const {\r\n    userData: { userShares },\r\n    pricePerFullShare,\r\n  } = useCakeVault()\r\n\r\n  const { cakeAsBigNumber, cakeAsNumberBalance } = convertSharesToCake(userShares, pricePerFullShare)\r\n  const hasSharesStaked = userShares && userShares.gt(0)\r\n  const isVaultWithShares = isAutoVault && hasSharesStaked\r\n  const stakedAutoDollarValue = getBalanceNumber(cakeAsBigNumber.multipliedBy(stakingTokenPrice), stakingToken.decimals)\r\n\r\n  const needsApproval = isAutoVault ? !isVaultApproved : !allowance.gt(0) && !isBnbPool\r\n\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n\r\n  const [onPresentStake] = useModal(\r\n    <StakeModal\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n    />,\r\n  )\r\n\r\n  const [onPresentVaultStake] = useModal(<VaultStakeModal stakingMax={stakingTokenBalance} pool={pool} />)\r\n\r\n  const [onPresentUnstake] = useModal(\r\n    <StakeModal\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n      isRemovingStake\r\n    />,\r\n  )\r\n\r\n  const [onPresentVaultUnstake] = useModal(<VaultStakeModal stakingMax={cakeAsBigNumber} pool={pool} isRemovingStake />)\r\n\r\n  const onStake = () => {\r\n    if (isAutoVault) {\r\n      onPresentVaultStake()\r\n    } else {\r\n      onPresentStake()\r\n    }\r\n  }\r\n\r\n  const onUnstake = () => {\r\n    if (isAutoVault) {\r\n      onPresentVaultUnstake()\r\n    } else {\r\n      onPresentUnstake()\r\n    }\r\n  }\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t(\"You've already staked the maximum amount you can stake in this pool!\"),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const reachStakingLimit = stakingLimit.gt(0) && userData.stakedBalance.gte(stakingLimit)\r\n\r\n  if (!account) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Start staking')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <UnlockButton width=\"100%\" />\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  if (!userDataLoaded) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Start staking')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Skeleton width={180} height=\"32px\" marginTop={14} />\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  if (needsApproval) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Enable pool')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Button width=\"100%\" disabled={requestedApproval} onClick={handleApprove} variant=\"secondary\">\r\n            {t('Enable')}\r\n          </Button>\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  // Wallet connected, user data loaded and approved\r\n  if (isNotVaultAndHasStake || isVaultWithShares) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"secondary\" as=\"span\" textTransform=\"uppercase\">\r\n            {stakingToken.symbol}{' '}\r\n          </Text>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {isAutoVault ? t('Staked (compounding)') : t('Staked')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Flex flex=\"1\" pt=\"16px\" flexDirection=\"column\" alignSelf=\"flex-start\">\r\n            <Balance\r\n              lineHeight=\"1\"\r\n              bold\r\n              fontSize=\"20px\"\r\n              decimals={5}\r\n              value={isAutoVault ? cakeAsNumberBalance : stakedTokenBalance}\r\n            />\r\n            <Balance\r\n              fontSize=\"12px\"\r\n              display=\"inline\"\r\n              color=\"textSubtle\"\r\n              decimals={2}\r\n              value={isAutoVault ? stakedAutoDollarValue : stakedTokenDollarBalance}\r\n              unit=\" USD\"\r\n              prefix=\"~\"\r\n            />\r\n          </Flex>\r\n          <IconButtonWrapper>\r\n            <IconButton variant=\"secondary\" onClick={onUnstake} mr=\"6px\">\r\n              <MinusIcon color=\"primary\" width=\"14px\" />\r\n            </IconButton>\r\n            {reachStakingLimit ? (\r\n              <span ref={targetRef}>\r\n                <IconButton variant=\"secondary\" disabled>\r\n                  <AddIcon color=\"textDisabled\" width=\"24px\" height=\"24px\" />\r\n                </IconButton>\r\n              </span>\r\n            ) : (\r\n              <IconButton\r\n                variant=\"secondary\"\r\n                onClick={stakingTokenBalance.gt(0) ? onStake : onPresentTokenRequired}\r\n                disabled={isFinished}\r\n              >\r\n                <AddIcon color=\"primary\" width=\"14px\" />\r\n              </IconButton>\r\n            )}\r\n          </IconButtonWrapper>\r\n          {tooltipVisible && tooltip}\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <ActionContainer>\r\n      <ActionTitles>\r\n        <Text fontSize=\"12px\" bold color=\"secondary\" as=\"span\" textTransform=\"uppercase\">\r\n          {t('Stake')}{' '}\r\n        </Text>\r\n        <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n          {stakingToken.symbol}\r\n        </Text>\r\n      </ActionTitles>\r\n      <ActionContent>\r\n        <Button\r\n          width=\"100%\"\r\n          onClick={stakingTokenBalance.gt(0) ? onStake : onPresentTokenRequired}\r\n          variant=\"secondary\"\r\n          disabled={isFinished}\r\n        >\r\n          {t('Stake')}\r\n        </Button>\r\n      </ActionContent>\r\n    </ActionContainer>\r\n  )\r\n}\r\n\r\nexport default Staked\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport { Pool } from 'state/types'\r\nimport { useCakeVault } from 'state/hooks'\r\nimport useDelayedUnmount from 'hooks/useDelayedUnmount'\r\nimport NameCell from './Cells/NameCell'\r\nimport EarningsCell from './Cells/EarningsCell'\r\nimport AprCell from './Cells/AprCell'\r\nimport TotalStakedCell from './Cells/TotalStakedCell'\r\nimport EndsInCell from './Cells/EndsInCell'\r\nimport ExpandActionCell from './Cells/ExpandActionCell'\r\nimport ActionPanel from './ActionPanel/ActionPanel'\r\n\r\ninterface PoolRowProps {\r\n  pool: Pool\r\n  account: string\r\n  userDataLoaded: boolean\r\n}\r\n\r\nconst StyledRow = styled.div`\r\n  background-color: transparent;\r\n  display: flex;\r\n  cursor: pointer;\r\n`\r\n\r\nconst PoolRow: React.FC<PoolRowProps> = ({ pool, account, userDataLoaded }) => {\r\n  const { isXs, isSm, isMd, isLg, isXl } = useMatchBreakpoints()\r\n  const [expanded, setExpanded] = useState(false)\r\n  const shouldRenderActionPanel = useDelayedUnmount(expanded, 300)\r\n\r\n  const toggleExpanded = () => {\r\n    setExpanded((prev) => !prev)\r\n  }\r\n\r\n  const {\r\n    fees: { performanceFee },\r\n  } = useCakeVault()\r\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\r\n\r\n  return (\r\n    <>\r\n      <StyledRow role=\"row\" onClick={toggleExpanded}>\r\n        <NameCell pool={pool} />\r\n        <EarningsCell pool={pool} account={account} userDataLoaded={userDataLoaded} />\r\n        <AprCell pool={pool} performanceFee={performanceFeeAsDecimal} />\r\n        {(isLg || isXl) && <TotalStakedCell pool={pool} />}\r\n        {isXl && <EndsInCell pool={pool} />}\r\n        <ExpandActionCell expanded={expanded} isFullLayout={isMd || isLg || isXl} />\r\n      </StyledRow>\r\n      {shouldRenderActionPanel && (\r\n        <ActionPanel\r\n          account={account}\r\n          pool={pool}\r\n          userDataLoaded={userDataLoaded}\r\n          expanded={expanded}\r\n          breakpoints={{ isXs, isSm, isMd, isLg, isXl }}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PoolRow\r\n","import React, { useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, ChevronUpIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Pool } from 'state/types'\r\nimport PoolRow from './PoolRow'\r\n\r\ninterface PoolsTableProps {\r\n  pools: Pool[]\r\n  userDataLoaded: boolean\r\n  account: string\r\n}\r\n\r\nconst StyledTable = styled.div`\r\n  border-radius: ${({ theme }) => theme.radii.card};\r\n\r\n  background-color: ${({ theme }) => theme.card.background};\r\n  > div:not(:last-child) {\r\n    border-bottom: 2px solid ${({ theme }) => theme.colors.textDisabled};\r\n  }\r\n`\r\n\r\nconst StyledTableBorder = styled.div`\r\n  border-radius: ${({ theme }) => theme.radii.card};\r\n  padding: 1px 1px 3px 1px;\r\n  background-size: 400% 400%;\r\n`\r\n\r\nconst ScrollButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n`\r\n\r\nconst PoolsTable: React.FC<PoolsTableProps> = ({ pools, userDataLoaded, account }) => {\r\n  const { t } = useTranslation()\r\n  const tableWrapperEl = useRef<HTMLDivElement>(null)\r\n  const scrollToTop = (): void => {\r\n    tableWrapperEl.current.scrollIntoView({\r\n      behavior: 'smooth',\r\n    })\r\n  }\r\n  return (\r\n    <StyledTableBorder>\r\n      <StyledTable role=\"table\" ref={tableWrapperEl}>\r\n        {pools.map((pool) => (\r\n          <PoolRow\r\n            key={pool.isAutoVault ? 'auto-cake' : pool.sousId}\r\n            pool={pool}\r\n            account={account}\r\n            userDataLoaded={userDataLoaded}\r\n          />\r\n        ))}\r\n        <ScrollButtonContainer>\r\n          <Button variant=\"text\" onClick={scrollToTop}>\r\n            {t('To Top')}\r\n            <ChevronUpIcon color=\"primary\" />\r\n          </Button>\r\n        </ScrollButtonContainer>\r\n      </StyledTable>\r\n    </StyledTableBorder>\r\n  )\r\n}\r\n\r\nexport default PoolsTable\r\n","import React, { useEffect, useMemo, useRef, useState, useContext } from 'react'\r\nimport { useLocation, Route, useRouteMatch } from 'react-router-dom'\r\nimport styled, { ThemeContext } from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Heading, Flex, Image } from '@pancakeswap/uikit'\r\nimport { Text } from '@sparkpointio/sparkswap-uikit'\r\nimport ReactLoading from 'react-loading'\r\nimport orderBy from 'lodash/orderBy'\r\nimport partition from 'lodash/partition'\r\nimport { SvgIcon } from '@material-ui/core'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport usePersistState from 'hooks/usePersistState'\r\nimport { usePoolPrice } from 'hooks/price'\r\nimport usePrevious from 'hooks/refHelpers'\r\nimport { usePools, useFetchCakeVault, useFetchPublicPoolsData, usePollFarmsData, useCakeVault } from 'state/hooks'\r\nimport { latinise } from 'utils/latinise'\r\nimport { getPoolApr } from 'utils/apr'\r\nimport { getBalanceAmount, getBalanceNumber } from 'utils/formatBalance'\r\nimport FlexLayout from 'components/layout/Flex'\r\nimport Page from 'components/layout/Page'\r\nimport PageHeader from 'components/PageHeader'\r\nimport { StyledHr } from 'views/Farms/components/Divider'\r\nimport SearchInput from 'components/SearchInput'\r\nimport Select, { OptionProps } from 'components/Select/Select'\r\nimport { Pool } from 'state/types'\r\nimport useMedia from 'use-media'\r\nimport PoolCard from './components/PoolCard'\r\nimport CakeVaultCard from './components/CakeVaultCard'\r\nimport PoolTabButtons from './components/PoolTabButtons'\r\nimport BountyCard from './components/BountyCard'\r\nimport HelpButton from './components/HelpButton'\r\nimport PoolsTable from './components/PoolsTable/PoolsTable'\r\nimport { ViewMode } from './components/ToggleView/ToggleView'\r\nimport { getAprData, getCakeVaultEarnings } from './helpers'\r\nimport { ReactComponent as FarmsDarkLogo } from './components/assets/farm-dark.svg'\r\nimport { ReactComponent as FarmsLightLogo } from './components/assets/farm-light.svg'\r\n\r\n\r\n\r\nconst CardLayout = styled(FlexLayout)`\r\n  justify-content: center;\r\n  margin: 25px 0px;\r\n`\r\n\r\nconst PoolControls = styled(Flex)`\r\n  flex-direction: column;\r\n  margin-bottom: 24px;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex-direction: row;\r\n  }\r\n`\r\n\r\nconst SearchSortContainer = styled(Flex)`\r\n  gap: 10px;\r\n  justify-content: space-between;\r\n`\r\n\r\nconst ControlStretch = styled(Flex)`\r\n  > div {\r\n    flex: 1;\r\n  }\r\n`\r\nconst InfoBox = styled(Flex)`\r\n  @media (max-width: 1024px) {\r\n    flex-direction: column;\r\n    & > * {\r\n      margin: 10px 0px;\r\n    }\r\n  }\r\n`\r\n\r\nconst NUMBER_OF_POOLS_VISIBLE = 12\r\n\r\nconst Pools: React.FC = () => {\r\n  const theme = useContext(ThemeContext)\r\n  const location = useLocation()\r\n  const { t } = useTranslation()\r\n  const { account, chainId } = useWeb3React()\r\n  const { pools: poolsWithoutAutoVault, userDataLoaded } = usePools(account)\r\n  const [stakedOnly, setStakedOnly] = usePersistState(false, { localStorageKey: 'pancake_pool_staked' })\r\n  const [numberOfPoolsVisible, setNumberOfPoolsVisible] = useState(NUMBER_OF_POOLS_VISIBLE)\r\n  const [observerIsSet, setObserverIsSet] = useState(false)\r\n  const loadMoreRef = useRef<HTMLDivElement>(null)\r\n  const [viewMode, setViewMode] = usePersistState(ViewMode.TABLE, { localStorageKey: 'pancake_farm_view' })\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [sortOption, setSortOption] = useState('hot')\r\n  const isMobile = useMedia({ maxWidth: 500 })\r\n  const {\r\n    userData: { cakeAtLastUserAction, userShares },\r\n    fees: { performanceFee },\r\n    pricePerFullShare,\r\n    totalCakeInVault,\r\n  } = useCakeVault()\r\n  const accountHasVaultShares = userShares && userShares.gt(0)\r\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\r\n\r\n  const pools = useMemo(() => {\r\n    const cakePool = poolsWithoutAutoVault.map((pool) => pool.sousId === 0)\r\n    const cakeAutoVault = { ...cakePool, isAutoVault: true }\r\n\r\n    return [...poolsWithoutAutoVault]\r\n  }, [poolsWithoutAutoVault])\r\n\r\n  // TODO aren't arrays in dep array checked just by reference, i.e. it will rerender every time reference changes?\r\n  const [ finishedPools, openPools ] = useMemo(() => partition(pools, (pool) => pool.isFinished), [pools])\r\n  const [ upcomingPools, notUpcomingPools ] = useMemo(() => partition(pools, (pool) => pool.isComingSoon), [pools])\r\n  const stakedOnlyFinishedPools = useMemo(\r\n    () =>\r\n    finishedPools.filter((pool) => {\r\n        if (pool.isAutoVault) {\r\n          return accountHasVaultShares\r\n        }\r\n        return pool.userData && new BigNumber(pool.userData.stakedBalance).isGreaterThan(0)\r\n      }),\r\n    [finishedPools, accountHasVaultShares],\r\n  )\r\n  const stakedOnlyOpenPools = useMemo(\r\n    () =>\r\n      openPools.filter((pool) => {\r\n        if (pool.isAutoVault) {\r\n          return accountHasVaultShares\r\n        }\r\n        return pool.userData && new BigNumber(pool.userData.stakedBalance).isGreaterThan(0)\r\n      }),\r\n    [openPools, accountHasVaultShares],\r\n  )\r\n  const hasStakeInFinishedPools = stakedOnlyFinishedPools.length > 0\r\n\r\n  usePollFarmsData()\r\n  useFetchCakeVault()\r\n  useFetchPublicPoolsData()\r\n\r\n  useEffect(() => {\r\n    const showMorePools = (entries) => {\r\n      const [entry] = entries\r\n      if (entry.isIntersecting) {\r\n        setNumberOfPoolsVisible((poolsCurrentlyVisible) => poolsCurrentlyVisible + NUMBER_OF_POOLS_VISIBLE)\r\n      }\r\n    }\r\n\r\n    if (!observerIsSet) {\r\n      const loadMoreObserver = new IntersectionObserver(showMorePools, {\r\n        rootMargin: '0px',\r\n        threshold: 1,\r\n      })\r\n      loadMoreObserver.observe(loadMoreRef.current)\r\n      setObserverIsSet(true)\r\n    }\r\n  }, [observerIsSet])\r\n\r\n  const showFinishedPools = location.pathname.includes('history')\r\n  const showUpcomingPools = location.pathname.includes('upcoming')\r\n\r\n  const handleChangeSearchQuery = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearchQuery(event.target.value)\r\n  }\r\n\r\n  const handleSortOptionChange = (option: OptionProps): void => {\r\n    setSortOption(option.value)\r\n  }\r\n\r\n  const sortPools = (poolsToSort: Pool[]) => {\r\n    switch (sortOption) {\r\n      case 'apr':\r\n        // Ternary is needed to prevent pools without APR (like MIX) getting top spot\r\n        return orderBy(\r\n          poolsToSort,\r\n          (pool: Pool) => (pool.apr ? getAprData(pool, performanceFeeAsDecimal).apr : 0),\r\n          'desc',\r\n        )\r\n      case 'earned':\r\n        return orderBy(\r\n          poolsToSort,\r\n          (pool: Pool) => {\r\n            if (!pool.userData || !pool.earningTokenPrice) {\r\n              return 0\r\n            }\r\n            return pool.isAutoVault\r\n              ? getCakeVaultEarnings(\r\n                  account,\r\n                  cakeAtLastUserAction,\r\n                  userShares,\r\n                  pricePerFullShare,\r\n                  pool.earningTokenPrice,\r\n                ).autoUsdToDisplay\r\n              : pool.userData.pendingReward.times(pool.earningTokenPrice).toNumber()\r\n          },\r\n          'desc',\r\n        )\r\n      case 'totalStaked':\r\n        return orderBy(\r\n          poolsToSort,\r\n          (pool: Pool) => (pool.isAutoVault ? totalCakeInVault.toNumber() : pool.totalStaked.toNumber()),\r\n          'desc',\r\n        )\r\n      default:\r\n        return poolsToSort\r\n    }\r\n  }\r\n\r\n  const poolsToShow = () => {\r\n    let chosenPools = []\r\n    if (showUpcomingPools) {\r\n      chosenPools = stakedOnly ? stakedOnlyFinishedPools : finishedPools\r\n    } else if (showFinishedPools) {\r\n      chosenPools = stakedOnly ? stakedOnlyFinishedPools : finishedPools\r\n    } else {\r\n      chosenPools = stakedOnly ? stakedOnlyOpenPools : openPools\r\n    }\r\n\r\n    if (searchQuery) {\r\n      const lowercaseQuery = latinise(searchQuery.toLowerCase())\r\n      chosenPools = chosenPools.filter((pool) =>\r\n        latinise(pool.earningToken.symbol.toLowerCase()).includes(lowercaseQuery),\r\n      )\r\n    }\r\n\r\n    return sortPools(chosenPools).slice(0, numberOfPoolsVisible)\r\n  }\r\n\r\n  const cardLayout = (\r\n    <CardLayout>\r\n      {poolsToShow().map((pool) =>\r\n        pool.isAutoVault ? (\r\n          <CakeVaultCard key=\"auto-cake\" pool={pool} showStakedOnly={stakedOnly} />\r\n        ) : (\r\n          <PoolCard key={pool.sousId} pool={pool} account={account} />\r\n        ),\r\n      )}\r\n    </CardLayout>\r\n  )\r\n\r\n  const [ isFetchData, setFetchData] = useState<boolean | null>(true); \r\n\r\n  const tableLayout = <PoolsTable pools={poolsToShow()} account={account} userDataLoaded={userDataLoaded} />\r\n  const { path, url, isExact } = useRouteMatch()\r\n  const mggPool = openPools.filter((pool) => pool.mainPool)[0];\r\n  const totalStaked = mggPool.totalStaked ? getBalanceNumber(new BigNumber(mggPool.totalStaked.toString()), mggPool.stakingToken.decimals) : 0\r\n  const rewardPerBlock = mggPool?.tokenPerBlock ? getBalanceNumber(new BigNumber(mggPool.tokenPerBlock.toString()), mggPool.earningToken.decimals) : 0\r\n  const {stakingPrice, rewardPrice} = usePoolPrice(mggPool.stakingToken.address[mggPool.chainId], mggPool.earningToken.address[mggPool.chainId], isFetchData)\r\n\r\n  const prevStakingPrice = usePrevious(stakingPrice);\r\n  const prevRewardPrice = usePrevious(rewardPrice)\r\n\r\n  useEffect(() => {\r\n    if ((stakingPrice > 0) || (rewardPrice > 0)) {\r\n      setFetchData(false);\r\n    }   \r\n    setTimeout(() => {\r\n      setFetchData(true);\r\n      if ((stakingPrice !== prevStakingPrice) || (rewardPrice !== prevRewardPrice)) {\r\n        setFetchData(true);\r\n      } else {\r\n        setFetchData(false);\r\n      }\r\n    }, 60000);\r\n    if ((prevStakingPrice === stakingPrice) || (prevRewardPrice === rewardPrice)) {\r\n      setFetchData(false);\r\n    }\r\n    \r\n    \r\n  }, [stakingPrice, rewardPrice, setFetchData, prevStakingPrice, prevRewardPrice])\r\n\r\n  useEffect(() => {\r\n    return setFetchData(null)\r\n  }, [])\r\n  const poolApr = getPoolApr(stakingPrice, rewardPrice, totalStaked, rewardPerBlock) ?? 0\r\n  const apr = poolApr > 0 ? `${poolApr.toFixed(2)} %` : <ReactLoading type=\"spin\" height=\"20px\" width=\"20px\"/>\r\n  const tvr = useMemo(\r\n    () => new BigNumber(totalStaked).times(stakingPrice).toFixed(4),\r\n    [totalStaked, stakingPrice])\r\n    \r\n  return (\r\n    <>\r\n      <PageHeader>\r\n        <Flex\r\n          alignItems=\"center\"\r\n          justifyContent=\"space-around\"\r\n          flexDirection={['column', null, 'row']}\r\n          style={isMobile ? { flexDirection: 'column-reverse' } : { minHeight: '20vh', marginLeft: '-16px' }}\r\n          padding=\"24px\"\r\n        >\r\n          <Flex flexDirection=\"column\" flex=\"2\">\r\n            <Flex\r\n              justifyContent=\"space-around\"\r\n              flexDirection=\"column\"\r\n              padding=\"25px 25px 25px 0px\"\r\n              mr={['8px', 0]}\r\n              style={{ borderBottom: `1px solid ${theme.colors.MGG_active}` }}\r\n            >\r\n              <Text color={theme.colors.primary} fontSize=\"60px\" bold>\r\n                Pool Staking\r\n              </Text>\r\n              <Text color=\"text\" bold style={isMobile ? { fontSize: '17px' } : { fontSize: '27px' }}>\r\n                Earn MGG and other tokens by staking!\r\n              </Text>\r\n            </Flex>\r\n            <InfoBox style={{ width: '100%' }} margin=\"20px 0px 0px 0px\" justifyContent=\"space-between\">\r\n              <Flex flexDirection=\"column\">\r\n                <Text fontSize=\"17px\" bold color={theme.colors.MGG_accent2}>\r\n                  Total MGG Staked\r\n                </Text>\r\n                <Text fontSize=\"20px\"> {totalStaked} {mggPool.stakingToken.symbol}</Text>\r\n              </Flex>\r\n              <Flex flexDirection=\"column\">\r\n                <Text fontSize=\"17px\" bold color={theme.colors.MGG_accent2}>\r\n                  Total Value Locked\r\n                </Text>\r\n                <Text fontSize=\"20px\">{Number(tvr) > 0? `${tvr} USD` : <ReactLoading type=\"spin\" height=\"20px\" width=\"20px\"/> }</Text>\r\n              </Flex>\r\n              <Flex flexDirection=\"column\">\r\n                <Text fontSize=\"17px\" bold color={theme.colors.MGG_accent2}>\r\n                  APR\r\n                </Text>\r\n                <Text fontSize=\"20px\"> {apr} </Text>\r\n              </Flex>\r\n            </InfoBox>\r\n          </Flex>\r\n        </Flex>\r\n      </PageHeader>\r\n      <Page>\r\n        {/* {!showFinishedPools && !showUpcomingPools && (\r\n          <div>\r\n            <Text bold fontSize=\"20px\" marginLeft=\"24px\" paddingBottom=\"24px\">\r\n            {' '}\r\n            Stake tokens to earn{' '}\r\n          </Text>\r\n            <StyledHr style={{ marginTop: '35px', width: '100%' }} />\r\n\r\n           // Header title for Active Pools  \r\n\r\n            <Flex justifyContent=\"space-between\" style={{ margin: '20px' }}>\r\n              <Flex flexDirection=\"column\" mr={['8px', 0]}>\r\n                <Heading scale=\"md\" color=\"text\">\r\n                  {t('Stake tokens to earn')}\r\n                </Heading>\r\n              </Flex>\r\n            </Flex>\r\n          </div>\r\n        )} */}\r\n\r\n        {/* UPCOMING  */}\r\n        {showUpcomingPools && (\r\n          <>\r\n            <StyledHr style={{ marginTop: '35px' }} />\r\n\r\n            <Flex justifyContent=\"space-between\" style={{ margin: '20px' }}>\r\n              <Flex flexDirection=\"column\" mr={['8px', 0]}>\r\n                <Heading scale=\"md\" color=\"text\">\r\n                  {t('These pools are coming in the near future. Stay tuned.')}\r\n                </Heading>\r\n              </Flex>\r\n            </Flex>\r\n          </>\r\n        )}\r\n\r\n        {/* ENDED  */}\r\n        {showFinishedPools && (\r\n          <>\r\n            <StyledHr style={{ marginTop: '35px' }} />\r\n\r\n            <Flex justifyContent=\"space-between\" style={{ margin: '20px' }}>\r\n              <Flex flexDirection=\"column\" mr={['8px', 0]}>\r\n                <Heading scale=\"md\" color=\"text\">\r\n                  {t('These pools are no longer distributing rewards. Please unstake your tokens.')}\r\n                </Heading>\r\n              </Flex>\r\n            </Flex>\r\n          </>\r\n        )}\r\n\r\n        {/* viewMode === ViewMode.CARD ? cardLayout : tableLayout */}\r\n\r\n        {cardLayout}\r\n\r\n        <div ref={loadMoreRef} />\r\n        {/* <Image\r\n          mx=\"auto\"\r\n          mt=\"12px\"\r\n          src=\"/images/3d-syrup-bunnies.png\"\r\n          alt=\"Pancake illustration\"\r\n          width={192}\r\n          height={184.5}\r\n        /> */}\r\n      </Page>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Pools\r\n"],"sourceRoot":""}